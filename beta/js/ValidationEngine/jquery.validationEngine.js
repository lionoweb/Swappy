(function($){"use strict";var x={init:function(a){var b=this;if(!b.data('jqv')||b.data('jqv')==null){a=x._saveOptions(b,a);$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).parent('.formErrorOuter').remove();$(this).remove()})})}return this},attach:function(a){var b=this;var c;if(a)c=x._saveOptions(b,a);else c=b.data('jqv');c.validateAttribute=(b.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(c.binded){b.on(c.validationEventTrigger,"["+c.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",x._onFieldEvent);b.on("click","["+c.validateAttribute+"*=validate][type=checkbox],["+c.validateAttribute+"*=validate][type=radio]",x._onFieldEvent);b.on(c.validationEventTrigger,"["+c.validateAttribute+"*=validate][class*=datepicker]",{"delay":300},x._onFieldEvent)}if(c.autoPositionUpdate){$(window).bind("resize",{"noAnimation":true,"formElem":b},x.updatePromptsPosition)}b.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",x._submitButtonClick);b.removeData('jqv_submitButton');b.on("submit",x._onSubmitEvent);return this},detach:function(){var a=this;var b=a.data('jqv');a.find("["+b.validateAttribute+"*=validate]").not("[type=checkbox]").off(b.validationEventTrigger,x._onFieldEvent);a.find("["+b.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",x._onFieldEvent);a.off("submit",x.onAjaxFormComplete);a.off("submit",x.onAjaxFormComplete);a.removeData('jqv');a.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",x._submitButtonClick);a.removeData('jqv_submitButton');if(b.autoPositionUpdate)$(window).unbind("resize",x.updatePromptsPosition);return this},validate:function(){var a=$(this);var b=null;if(a.is("form")||a.hasClass("validationEngineContainer")){if(a.hasClass('validating')){return false}else{a.addClass('validating');var c=a.data('jqv');var b=x._validateFields(this);setTimeout(function(){a.removeClass('validating')},100);if(b&&c.onSuccess){c.onSuccess()}else if(!b&&c.onFailure){c.onFailure()}}}else if(a.is('form')||a.hasClass('validationEngineContainer')){a.removeClass('validating')}else{var d=a.closest('form, .validationEngineContainer'),c=(d.data('jqv'))?d.data('jqv'):$.validationEngine.defaults,b=x._validateField(a,c);if(b&&c.onFieldSuccess)c.onFieldSuccess();else if(c.onFieldFailure&&c.InvalidFields.length>0){c.onFieldFailure()}}if(c.onValidationComplete){return!!c.onValidationComplete(d,b)}return b},updatePromptsPosition:function(d){if(d&&this==window){var e=d.data.formElem;var f=d.data.noAnimation}else var e=$(this.closest('form, .validationEngineContainer'));var g=e.data('jqv');e.find('['+g.validateAttribute+'*=validate]').not(":disabled").each(function(){var a=$(this);if(g.prettySelect&&a.is(":hidden"))a=e.find("#"+g.usePrefix+a.attr('id')+g.useSuffix);var b=x._getPrompt(a);var c=$(b).find(".formErrorContent").html();if(b)x._updatePrompt(a,$(b),c,undefined,false,g,f)});return this},showPrompt:function(a,b,c,d,e){if(typeof(e)=="undefined"){var e=false}var f=this.closest('form, .validationEngineContainer');var g=f.data('jqv');if(!g)g=x._saveOptions(this,g);if(c)g.promptPosition=c;g.showArrow=d==true;x._showPrompt(this,a,b,false,g,false,e);return this},hide:function(){var a=$(this).closest('form, .validationEngineContainer');var b=a.data('jqv');var c=(b&&b.fadeDuration)?b.fadeDuration:0.3;var d;if($(this).is("form")||$(this).hasClass("validationEngineContainer")){d="parentForm"+x._getClassName($(this).attr("id"))}else{d=x._getClassName($(this).attr("id"))+"formError"}$('.'+d).fadeTo(c,0.3,function(){$(this).parent('.formErrorOuter').remove();$(this).remove()});return this},hideAll:function(){var a=this;var b=a.data('jqv');var c=b?b.fadeDuration:300;$('.formError').fadeTo(c,300,function(){$(this).parent('.formErrorOuter').remove();$(this).remove()});return this},_onFieldEvent:function(a){var b=$(this);var c=b.closest('form, .validationEngineContainer');var d=c.data('jqv');d.eventTrigger="field";window.setTimeout(function(){x._validateField(b,d);if(d.InvalidFields.length==0&&d.onFieldSuccess){d.onFieldSuccess()}else if(d.InvalidFields.length>0&&d.onFieldFailure){d.onFieldFailure()}},(a.data)?a.data.delay:0)},_onSubmitEvent:function(){var a=$(this);var b=a.data('jqv');if(a.data("jqv_submitButton")){var c=$("#"+a.data("jqv_submitButton"));if(c){if(c.length>0){if(c.hasClass("validate-skip")||c.attr("data-validation-engine-skip")=="true")return true}}}b.eventTrigger="submit";var r=x._validateFields(a);if(r&&b.ajaxFormValidation){x._validateFormWithAjax(a,b);return false}if(b.onValidationComplete){return!!b.onValidationComplete(a,r)}return r},_checkAjaxStatus:function(c){var d=true;$.each(c.ajaxValidCache,function(a,b){if(!b){d=false;return false}});return d},_checkAjaxFieldStatus:function(a,b){return b.ajaxValidCache[a]==true},_validateFields:function(c){var d=c.data('jqv');var e=false;c.trigger("jqv.form.validating");var f=null;c.find('['+d.validateAttribute+'*=validate]').not(":disabled").each(function(){var a=$(this);var b=[];if($.inArray(a.attr('name'),b)<0){e|=x._validateField(a,d);if(e&&f==null)if(a.is(":hidden")&&d.prettySelect)f=a=c.find("#"+d.usePrefix+x._jqSelector(a.attr('id'))+d.useSuffix);else f=a;if(d.doNotShowAllErrosOnSubmit)return false;b.push(a.attr('name'));if(d.showOneMessage==true&&e){return false}}});c.trigger("jqv.form.result",[e]);if(f!=null){var g=f.parent().html()}else{var g=""}if(e){if(d.scroll&&!g.match(/BlackPopup/gi)){var h=f.offset().top;var i=f.offset().left;var j=d.promptPosition;if(typeof(j)=='string'&&j.indexOf(":")!=-1)j=j.substring(0,j.indexOf(":"));if(j!="bottomRight"&&j!="bottomLeft"){var k=x._getPrompt(f);if(k){h=k.offset().top}}if(d.scrollOffset){h-=d.scrollOffset}if(d.isOverflown){var l=0;if($(".nav-h.visible").length>0){l=30}var m=$(d.overflownDIV);if(!m.length)return false;var n=m.scrollTop();var o=-parseInt(m.offset().top)-($("nav").height()+50+l);h+=n+o-5;var p=$(d.overflownDIV+":not(:animated)");p.animate({scrollTop:h},900,function(){if(d.focusFirstField)f.focus()})}else{var l=0;if($(".nav-h.visible").length>0){l=30}$("html, body").animate({scrollTop:h-($("nav").height()+50+l)},900,function(){if(d.focusFirstField)f.focus()});$("html, body").animate({scrollLeft:i},900)}}else if(d.focusFirstField)f.focus();return false}return true},_validateFormWithAjax:function(h,j){var k=h.serialize();var l=(j.ajaxFormValidationMethod)?j.ajaxFormValidationMethod:"GET";var m=(j.ajaxFormValidationURL)?j.ajaxFormValidationURL:h.attr("action");var n=(j.dataType)?j.dataType:"json";$.ajax({type:l,url:m,cache:false,dataType:n,data:k,form:h,methods:x,options:j,beforeSend:function(){return j.onBeforeAjaxFormValidation(h,j)},error:function(a,b){x._ajaxError(a,b)},success:function(a){if((n=="json")&&(a!==true)){var b=false;for(var i=0;i<a.length;i++){var c=a[i];var d=c[0];var e=$($("#"+d)[0]);if(e.length==1){var f=c[2];if(c[1]==true){if(f==""||!f){x._closePrompt(e)}else{if(j.allrules[f]){var g=j.allrules[f].alertTextOk;if(g)f=g}if(j.showPrompts)x._showPrompt(e,f,"pass",false,j,true)}}else{b|=true;if(j.allrules[f]){var g=j.allrules[f].alertText;if(g)f=g}if(j.showPrompts)x._showPrompt(e,f,"",false,j,true)}}}j.onAjaxFormComplete(!b,h,a,j)}else j.onAjaxFormComplete(true,h,a,j)}})},_validateField:function(a,b,c){if(!a.attr("id")){a.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter);++$.validationEngine.fieldIdCounter}if(!b.validateNonVisibleFields&&(a.is(":hidden")&&!b.prettySelect||a.parent().is(":hidden")))return false;var d=a.attr(b.validateAttribute);var e=/validate\[(.*)\]/.exec(d);if(!e)return false;var f=e[1];var g=f.split(/\[|,|\]/);var h=false;var j=a.attr("name");var k="";var l="";var m=false;var n=false;b.isError=false;b.showArrow=true;if(b.maxErrorsPerField>0){n=true}var o=$(a.closest("form, .validationEngineContainer"));for(var i=0;i<g.length;i++){g[i]=g[i].replace(" ","");if(g[i]===''){delete g[i]}}for(var i=0,field_errors=0;i<g.length;i++){if(n&&field_errors>=b.maxErrorsPerField){if(!m){var p=$.inArray('required',g);m=(p!=-1&&p>=i)}break}var q=undefined;switch(g[i]){case"required":m=true;q=x._getErrorMessage(o,a,g[i],g,i,b,x._required);break;case"custom":q=x._getErrorMessage(o,a,g[i],g,i,b,x._custom);break;case"groupRequired":var r="["+b.validateAttribute+"*="+g[i+1]+"]";var s=o.find(r).eq(0);if(s[0]!=a[0]){x._validateField(s,b,c);b.showArrow=true}q=x._getErrorMessage(o,a,g[i],g,i,b,x._groupRequired);if(q)m=true;b.showArrow=false;break;case"ajax":q=x._ajax(a,g,i,b);if(q){l="load"}break;case"minSize":q=x._getErrorMessage(o,a,g[i],g,i,b,x._minSize);break;case"maxSize":q=x._getErrorMessage(o,a,g[i],g,i,b,x._maxSize);break;case"min":q=x._getErrorMessage(o,a,g[i],g,i,b,x._min);break;case"max":q=x._getErrorMessage(o,a,g[i],g,i,b,x._max);break;case"past":q=x._getErrorMessage(o,a,g[i],g,i,b,x._past);break;case"future":q=x._getErrorMessage(o,a,g[i],g,i,b,x._future);break;case"dateRange":var r="["+b.validateAttribute+"*="+g[i+1]+"]";b.firstOfGroup=o.find(r).eq(0);b.secondOfGroup=o.find(r).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value){q=x._getErrorMessage(o,a,g[i],g,i,b,x._dateRange)}if(q)m=true;b.showArrow=false;break;case"dateTimeRange":var r="["+b.validateAttribute+"*="+g[i+1]+"]";b.firstOfGroup=o.find(r).eq(0);b.secondOfGroup=o.find(r).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value){q=x._getErrorMessage(o,a,g[i],g,i,b,x._dateTimeRange)}if(q)m=true;b.showArrow=false;break;case"maxCheckbox":a=$(o.find("input[name='"+j+"']"));q=x._getErrorMessage(o,a,g[i],g,i,b,x._maxCheckbox);break;case"minCheckbox":a=$(o.find("input[name='"+j+"']"));q=x._getErrorMessage(o,a,g[i],g,i,b,x._minCheckbox);break;case"equals":q=x._getErrorMessage(o,a,g[i],g,i,b,x._equals);break;case"equalsPASS":q=x._getErrorMessage(o,a,g[i],g,i,b,x._equalsPASS);break;case"timeCheck":q=x._getErrorMessage(o,a,g[i],g,i,b,x._timeCheck);break;case"funcCall":q=x._getErrorMessage(o,a,g[i],g,i,b,x._funcCall);break;case"creditCard":q=x._getErrorMessage(o,a,g[i],g,i,b,x._creditCard);break;case"condRequired":q=x._getErrorMessage(o,a,g[i],g,i,b,x._condRequired);if(q!==undefined){m=true}break;default:}var t=false;if(typeof q=="object"){switch(q.status){case"_break":t=true;break;case"_error":q=q.message;break;case"_error_no_prompt":return true;break;default:break}}if(t){break}if(typeof q=='string'){k+=q+"<br/>";b.isError=true;field_errors++}}if(!m&&!(a.val())&&a.val().length<1)b.isError=false;var u=a.prop("type");var v=a.data("promptPosition")||b.promptPosition;if((u=="radio"||u=="checkbox")&&o.find("input[name='"+j+"']").size()>1){if(v==='inline'){a=$(o.find("input[name='"+j+"'][type!=hidden]:last"))}else{a=$(o.find("input[name='"+j+"'][type!=hidden]:first"))}b.showArrow=false}if(a.is(":hidden")&&b.prettySelect){a=o.find("#"+b.usePrefix+x._jqSelector(a.attr('id'))+b.useSuffix)}if(b.isError&&b.showPrompts){x._showPrompt(a,k,l,false,b)}else{if(!h)x._closePrompt(a)}if(!h){a.trigger("jqv.field.result",[a,b.isError,k])}var w=$.inArray(a[0],b.InvalidFields);if(w==-1){if(b.isError)b.InvalidFields.push(a[0])}else if(!b.isError){b.InvalidFields.splice(w,1)}x._handleStatusCssClasses(a,b);if(b.isError&&b.onFieldFailure)b.onFieldFailure(a);if(!b.isError&&b.onFieldSuccess)b.onFieldSuccess(a);return b.isError},_handleStatusCssClasses:function(a,b){if(b.addSuccessCssClassToField)a.removeClass(b.addSuccessCssClassToField);if(b.addFailureCssClassToField)a.removeClass(b.addFailureCssClassToField);if(b.addSuccessCssClassToField&&!b.isError)a.addClass(b.addSuccessCssClassToField);if(b.addFailureCssClassToField&&b.isError)a.addClass(b.addFailureCssClassToField)},_getErrorMessage:function(a,b,c,d,i,e,f){var g=jQuery.inArray(c,d);if(c==="custom"||c==="funcCall"){var h=d[g+1];c=c+"["+h+"]";delete(d[g])}var j=c;var k=(b.attr("data-validation-engine"))?b.attr("data-validation-engine"):b.attr("class");var l=k.split(" ");var m;if(c=="future"||c=="past"||c=="maxCheckbox"||c=="minCheckbox"){m=f(a,b,d,i,e)}else{m=f(b,d,i,e)}if(m!=undefined){var n=x._getCustomErrorMessage($(b),l,j,e);if(n)m=n}return m},_getCustomErrorMessage:function(a,b,c,d){var e=false;var f=/^custom\[.*\]$/.test(c)?x._validityProp["custom"]:x._validityProp[c];if(f!=undefined){e=a.attr("data-errormessage-"+f);if(e!=undefined)return e}e=a.attr("data-errormessage");if(e!=undefined)return e;var g='#'+a.attr("id");if(typeof d.custom_error_messages[g]!="undefined"&&typeof d.custom_error_messages[g][c]!="undefined"){e=d.custom_error_messages[g][c]['message']}else if(b.length>0){for(var i=0;i<b.length&&b.length>0;i++){var h="."+b[i];if(typeof d.custom_error_messages[h]!="undefined"&&typeof d.custom_error_messages[h][c]!="undefined"){e=d.custom_error_messages[h][c]['message'];break}}}if(!e&&typeof d.custom_error_messages[c]!="undefined"&&typeof d.custom_error_messages[c]['message']!="undefined"){e=d.custom_error_messages[c]['message']}return e},_validityProp:{"required":"value-missing","custom":"custom-error","groupRequired":"value-missing","ajax":"custom-error","minSize":"range-underflow","maxSize":"range-overflow","min":"range-underflow","max":"range-overflow","past":"type-mismatch","future":"type-mismatch","dateRange":"type-mismatch","dateTimeRange":"type-mismatch","maxCheckbox":"range-overflow","minCheckbox":"range-underflow","equals":"pattern-mismatch","equalsPASS":"pattern-mismatch","timeCheck":"pattern-mismatch","funcCall":"custom-error","creditCard":"pattern-mismatch","condRequired":"value-missing"},_required:function(a,b,i,c,d){switch(a.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var e=$.trim(a.val());var f=$.trim(a.attr("data-validation-placeholder"));var g=$.trim(a.attr("placeholder"));if((!e)||(f&&e==f)||(g&&e==g)){return c.allrules[b[i]].alertText}break;case"radio":case"checkbox":if(d){if(!a.attr('checked')){return c.allrules[b[i]].alertTextCheckboxMultiple}break}var h=a.closest("form, .validationEngineContainer");var j=a.attr("name");if(h.find("input[name='"+j+"']:checked").size()==0){if(h.find("input[name='"+j+"']:visible").size()==1)return c.allrules[b[i]].alertTextCheckboxe;else return c.allrules[b[i]].alertTextCheckboxMultiple}break}},_groupRequired:function(a,b,i,c){var d="["+c.validateAttribute+"*="+b[i+1]+"]";var e=false;a.closest("form, .validationEngineContainer").find(d).each(function(){if(!x._required($(this),b,i,c)){e=true;return false}});if(!e){return c.allrules[b[i]].alertText}},_custom:function(a,b,i,c){var d=b[i+1];var e=c.allrules[d];var f;if(!e){alert("jqv:custom rule not found - "+d);return}if(e["regex"]){var g=e.regex;if(!g){alert("jqv:custom regex not found - "+d);return}var h=new RegExp(g);if(!h.test(a.val()))return c.allrules[d].alertText}else if(e["func"]){f=e["func"];if(typeof(f)!=="function"){alert("jqv:custom parameter 'function' is no function - "+d);return}if(!f(a,b,i,c))return c.allrules[d].alertText}else{alert("jqv:custom type not allowed "+d);return}},_funcCall:function(a,b,i,c){var d=b[i+1];var e;if(d.indexOf('.')>-1){var f=d.split('.');var g=window;while(f.length){g=g[f.shift()]}e=g}else e=window[d]||c.customFunctions[d];if(typeof(e)=='function')return e(a,b,i,c)},_equals:function(a,b,i,c){var d=b[i+1];if(a.val()!=$("#"+d).val())return c.allrules.equals.alertText},_equalsPASS:function(a,b,i,c){var d=b[i+1];if(a.val()!=$("#"+d).val())return c.allrules.equalsPASS.alertText},_timeCheck:function(c,d,i,e){var f=d[i+1];var g=(c.val()).split(":");var h=g[0];var j=g[1];f=f.replace(/\}/gi,"]").replace(/\{/gi,"[");var k=($("input[name='"+f+"']").val()).split(":");var l=k[0];var m=k[1];if(l<=h){if((l==h)&&(j<=m)){return e.allrules.timeCheck.alertText}else{var n;var o;var p;var q;var r;var s=f.replace("dispostart","");var t=true;if($("select[name='dispoday"+s+"']").val()=="all"){$("input[name^='dispostart']").each(function(a,b){if($(this).attr("name")!=f){n=$(this).attr("name").replace("dispostart","");o=$(this).val().split(":")[0];p=$("input[name='dispoend"+n+"']").val().split(":")[0];q=$(this).val().split(":")[1];r=$("input[name='dispoend"+n+"']").val().split(":")[1];if((o<l&&p<h)||(o>l&&p>h&&o>h)){}else{if(o==l&&q>m){}else if(o==h&&r>m){}else if(l==p&&r<=m&&h<=p){}else{t=false;return false}}}})}else if($("select[name='dispoday"+s+"']").val()=="weekend"){$("input[name^='dispostart']").each(function(a,b){if($(this).attr("name")!=f&&($(this).parent().find("select").val()=="sam"||$(this).parent().find("select").val()=="dim"||$(this).parent().find("select").val()=="all"||$(this).parent().find("select").val()=="weekend")){n=$(this).attr("name").replace("dispostart","");o=$(this).val().split(":")[0];p=$("input[name='dispoend"+n+"']").val().split(":")[0];q=$(this).val().split(":")[1];r=$("input[name='dispoend"+n+"']").val().split(":")[1];if((o<l&&p<h)||(o>l&&p>h&&o>h)){}else{if(o==l&&q>m){}else if(o==h&&r>m){}else if(l==p&&r<=m&&h<=p){}else{t=false;return false}}}})}else{var u=$("select[name='dispoday"+s+"']").val();if(u=="sam"||u=="dim"){$("input[name^='dispostart']").each(function(a,b){if($(this).attr("name")!=f&&($(this).parent().find("select").val()==u||$(this).parent().find("select").val()=="all"||$(this).parent().find("select").val()=="weekend")){n=$(this).attr("name").replace("dispostart","");o=$(this).val().split(":")[0];p=$("input[name='dispoend"+n+"']").val().split(":")[0];q=$(this).val().split(":")[1];r=$("input[name='dispoend"+n+"']").val().split(":")[1];if((o<l&&p<h)||(o>l&&p>h&&o>h)){}else{if(o==l&&q>m){}else if(o==h&&r>m){}else if(l==p&&r<=m&&h<=p){}else{t=false;return false}}}})}else{$("input[name^='dispostart']").each(function(a,b){if($(this).attr("name")!=f&&($(this).parent().find("select").val()==u||$(this).parent().find("select").val()=="all")){n=$(this).attr("name").replace("dispostart","");o=$(this).val().split(":")[0];p=$("input[name='dispoend"+n+"']").val().split(":")[0];q=$(this).val().split(":")[1];r=$("input[name='dispoend"+n+"']").val().split(":")[1];if((o<l&&p<h)||(o>l&&p>h&&o>h)){}else{if(o==l&&q>m){}else if(o==h&&r>m){}else if(l==p&&r<=m&&h<=p){}else{t=false;return false}}}})}}if(t==false){return"* Cette plage horaire entre en conflit avec d'autres plages"}}}else{return e.allrules.timeCheck.alertText}},_maxSize:function(a,b,i,c){var d=b[i+1];var e=a.val().length;if(e>d){var f=c.allrules.maxSize;return f.alertText+d+f.alertText2}},_minSize:function(a,b,i,c){var d=b[i+1];var e=a.val().length;if(e<d){var f=c.allrules.minSize;return f.alertText+d+f.alertText2}},_min:function(a,b,i,c){var d=parseFloat(b[i+1]);var e=parseFloat(a.val());if(e<d){var f=c.allrules.min;if(f.alertText2)return f.alertText+d+f.alertText2;return f.alertText+d}},_max:function(a,b,i,c){var d=parseFloat(b[i+1]);var e=parseFloat(a.val());if(e>d){var f=c.allrules.max;if(f.alertText2)return f.alertText+d+f.alertText2;return f.alertText+d}},_past:function(a,b,c,i,d){var p=c[i+1];var e=$(a.find("input[name='"+p.replace(/^#+/,'')+"']"));var f;if(p.toLowerCase()=="now"){f=new Date()}else if(undefined!=e.val()){if(e.is(":disabled"))return;f=x._parseDate(e.val())}else{f=x._parseDate(p)}var g=x._parseDate(b.val());if(g>f){var h=d.allrules.past;if(h.alertText2)return h.alertText+x._dateToString(f)+h.alertText2;return h.alertText+x._dateToString(f)}},_future:function(a,b,c,i,d){var p=c[i+1];var e=$(a.find("input[name='"+p.replace(/^#+/,'')+"']"));var f;if(p.toLowerCase()=="now"){f=new Date()}else if(undefined!=e.val()){if(e.is(":disabled"))return;f=x._parseDate(e.val())}else{f=x._parseDate(p)}var g=x._parseDate(b.val());if(g<f){var h=d.allrules.future;if(h.alertText2)return h.alertText+x._dateToString(f)+h.alertText2;return h.alertText+x._dateToString(f)}},_isDate:function(a){var b=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return b.test(a)},_isDateTime:function(a){var b=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return b.test(a)},_dateCompare:function(a,b){return(new Date(a.toString())<new Date(b.toString()))},_dateRange:function(a,b,i,c){if((!c.firstOfGroup[0].value&&c.secondOfGroup[0].value)||(c.firstOfGroup[0].value&&!c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}if(!x._isDate(c.firstOfGroup[0].value)||!x._isDate(c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}if(!x._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}},_dateTimeRange:function(a,b,i,c){if((!c.firstOfGroup[0].value&&c.secondOfGroup[0].value)||(c.firstOfGroup[0].value&&!c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}if(!x._isDateTime(c.firstOfGroup[0].value)||!x._isDateTime(c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}if(!x._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value)){return c.allrules[b[i]].alertText+c.allrules[b[i]].alertText2}},_maxCheckbox:function(a,b,c,i,d){var e=c[i+1];var f=b.attr("name");var g=a.find("input[name='"+f+"']:checked").size();if(g>e){d.showArrow=false;if(d.allrules.maxCheckbox.alertText2)return d.allrules.maxCheckbox.alertText+" "+e+" "+d.allrules.maxCheckbox.alertText2;return d.allrules.maxCheckbox.alertText}},_minCheckbox:function(a,b,c,i,d){var e=c[i+1];var f=b.attr("name");var g=a.find("input[name='"+f+"']:checked").size();if(g<e){d.showArrow=false;return d.allrules.minCheckbox.alertText+" "+e+" "+d.allrules.minCheckbox.alertText2}},_creditCard:function(a,b,i,c){var d=false,cardNumber=a.val().replace(/ +/g,'').replace(/-+/g,'');var e=cardNumber.length;if(e>=14&&e<=16&&parseInt(cardNumber)>0){var f=0,i=e-1,pos=1,digit,luhn=new String();do{digit=parseInt(cardNumber.charAt(i));luhn+=(pos++%2==0)?digit*2:digit}while(--i>=0)for(i=0;i<luhn.length;i++){f+=parseInt(luhn.charAt(i))}d=f%10==0}if(!d)return c.allrules.creditCard.alertText},_ajax:function(h,j,i,k){var l=j[i+1];var m=k.allrules[l];var n=m.extraData;var o=m.extraDataDynamic;var p={"fieldId":h.attr("id"),"fieldValue":h.val()};if(typeof n==="object"){$.extend(p,n)}else if(typeof n==="string"){var q=n.split("&");for(var i=0;i<q.length;i++){var r=q[i].split("=");if(r[0]&&r[0]){p[r[0]]=r[1]}}}if(o){var s=[];var t=String(o).split(",");for(var i=0;i<t.length;i++){var u=t[i];if($(u).length){var v=h.closest("form, .validationEngineContainer").find(u).val();var w=u.replace('#','')+'='+escape(v);p[u.replace('#','')]=v}}}if(k.eventTrigger=="field"){delete(k.ajaxValidCache[h.attr("id")])}if(!k.isError&&!x._checkAjaxFieldStatus(h.attr("id"),k)){$.ajax({type:k.ajaxFormValidationMethod,url:m.url,cache:false,dataType:"json",data:p,field:h,rule:m,methods:x,options:k,beforeSend:function(){},error:function(a,b){x._ajaxError(a,b)},success:function(a){var b=a[0];var c=$("#"+b).eq(0);if(c.parents(".col-xs-12").length>0){c=c.parents(".col-xs-12")}if(c.length==1){var d=a[1];var e=a[2];if(!d){k.ajaxValidCache[b]=false;k.isError=true;if(e&&!m.force_alert){if(k.allrules[e]){var f=k.allrules[e].alertText;if(f){e=f}}}else e=m.alertText;if(k.showPrompts)x._showPrompt(c,e,"",true,k)}else{k.ajaxValidCache[b]=true;if(e&&!m.force_alert){if(k.allrules[e]){var f=k.allrules[e].alertTextOk;if(f){e=f}}}else e=m.alertTextOk;if(k.showPrompts){if(e){x._showPrompt(c,e,"pass",true,k)}else{x._closePrompt(c)}}if(k.eventTrigger=="submit")h.closest("form").submit()}if(m.funcCall){var g=window[m.funcCall];g(a)}}c.trigger("jqv.field.result",[c,k.isError,e])}});return m.alertTextLoad}},_ajaxError:function(a,b){if(a.status==0&&b==null)alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")console.log("Ajax error: "+a.status+" "+b)},_dateToString:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(d){var a=d.split("-");if(a==d)a=d.split("/");if(a==d){a=d.split(".");return new Date(a[2],(a[1]-1),a[0])}return new Date(a[0],(a[1]-1),a[2])},_showPrompt:function(a,b,c,d,e,f,g){if(typeof(g)=="undefined"){var g=false}if(a.parents(".col-xs-12").length>0){a=a.parents(".col-xs-12")}var h=x._getPrompt(a);if(f)h=false;if(e.scroll&&g==true&&c!="load"){var i=a;var j=i.offset().top;var k=i.offset().left;var l=e.promptPosition;if(typeof(l)=='string'&&l.indexOf(":")!=-1)l=l.substring(0,l.indexOf(":"));if(l!="bottomRight"&&l!="bottomLeft"){var m=x._getPrompt(i);if(m){j=m.offset().top}}if(e.scrollOffset){j-=e.scrollOffset}if(e.isOverflown){var n=0;if($(".nav-h.visible").length>0){n=30}var o=$(e.overflownDIV);if(!o.length)return false;var p=o.scrollTop();var q=-parseInt(o.offset().top)-($("nav").height()+50+n);j+=p+q-5;var r=$(e.overflownDIV+":not(:animated)");r.animate({scrollTop:j},900,function(){if(e.focusFirstField)i.focus()})}else{var n=0;if($(".nav-h.visible").length>0){n=30}$("html, body").animate({scrollTop:j-($("nav").height()+50+n)},900,function(){if(e.focusFirstField)i.focus()});$("html, body").animate({scrollLeft:k},900)}}if($.trim(b)){if(h)x._updatePrompt(a,h,b,c,d,e);else x._buildPrompt(a,b,c,d,e)}},_buildPrompt:function(a,b,c,d,e){var f=$('<div>');f.addClass(x._getClassName(a.attr("id"))+"formError");f.addClass("parentForm"+x._getClassName(a.closest('form, .validationEngineContainer').attr("id")));f.addClass("formError");switch(c){case"pass":f.addClass("greenPopup");break;case"load":f.addClass("blackPopup");break;default:}if(d)f.addClass("ajaxed");var g=$('<div>').addClass("formErrorContent").html(b).appendTo(f);var h=a.data("promptPosition")||e.promptPosition;if(e.showArrow){var i=$('<div>').addClass("formErrorArrow");if(typeof(h)=='string'){var j=h.indexOf(":");if(j!=-1)h=h.substring(0,j)}switch(h){case"bottomLeft":case"bottomRight":f.find(".formErrorContent").before(i);i.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":i.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');f.append(i);break}}if(e.addPromptClass)f.addClass(e.addPromptClass);var k=a.attr('data-required-class');if(k!==undefined){f.addClass(k)}else{if(e.prettySelect){if($('#'+a.attr('id')).next().is('select')){var l=$('#'+a.attr('id').substr(e.usePrefix.length).substring(e.useSuffix.length)).attr('data-required-class');if(l!==undefined){f.addClass(l)}}}}f.css({"opacity":0});if(h==='inline'){f.addClass("inline");if(typeof a.attr('data-prompt-target')!=='undefined'&&$('#'+a.attr('data-prompt-target')).length>0){f.appendTo($('#'+a.attr('data-prompt-target')))}else{a.after(f)}}else{a.before(f)}var j=x._calculatePosition(a,f,e);f.css({'position':h==='inline'?'relative':'absolute',"top":j.callerTopPosition,"left":j.callerleftPosition,"marginTop":j.marginTopSize,"opacity":0}).data("callerField",a);if(e.autoHidePrompt){setTimeout(function(){f.animate({"opacity":0},function(){f.closest('.formErrorOuter').remove();f.remove()})},e.autoHideDelay)}return f.animate({"opacity":0.87})},_updatePrompt:function(a,b,c,d,e,f,g){if(b){if(typeof d!=="undefined"){if(d=="pass")b.addClass("greenPopup");else b.removeClass("greenPopup");if(d=="load")b.addClass("blackPopup");else b.removeClass("blackPopup")}if(e)b.addClass("ajaxed");else b.removeClass("ajaxed");b.find(".formErrorContent").html(c);var h=x._calculatePosition(a,b,f);var i={"top":h.callerTopPosition,"left":h.callerleftPosition,"marginTop":h.marginTopSize};if(g)b.css(i);else b.animate(i)}},_closePrompt:function(a){var b=x._getPrompt(a);if(b)b.fadeTo("fast",0,function(){b.parent('.formErrorOuter').remove();b.remove()})},closePrompt:function(a){return x._closePrompt(a)},_getPrompt:function(a){var b=$(a).closest('form, .validationEngineContainer').attr('id');var c=x._getClassName(a.attr("id"))+"formError";var d=$("."+x._escapeExpression(c)+'.parentForm'+b)[0];if(d)return $(d)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var b=$(document);var c=$('body');var d=(a&&a.hasClass('rtl'))||(a&&(a.attr('dir')||'').toLowerCase()==='rtl')||b.hasClass('rtl')||(b.attr('dir')||'').toLowerCase()==='rtl'||c.hasClass('rtl')||(c.attr('dir')||'').toLowerCase()==='rtl';return Boolean(d)},_calculatePosition:function(a,b,c){var d=true;var e,promptleftPosition,marginTopSize;var f=a.width();var g=a.position().left;var h=a.position().top;var i=a.height();if(b.css("position")=="absolute"&&b.css("opacity")>0){d=false}if(d==true){b.css("position","absolute").css("left","0").css("top","0")}var j=b.height();e=promptleftPosition=0;marginTopSize=-j;if(d==true){b.css("position","").css("left","").css("top","")}var k=a.data("promptPosition")||c.promptPosition;var l="";var m="";var n=0;var o=0;if(typeof(k)=='string'){if(k.indexOf(":")!=-1){l=k.substring(k.indexOf(":")+1);k=k.substring(0,k.indexOf(":"));if(l.indexOf(",")!=-1){m=l.substring(l.indexOf(",")+1);l=l.substring(0,l.indexOf(","));o=parseInt(m);if(isNaN(o))o=0};n=parseInt(l);if(isNaN(l))l=0}};switch(k){default:case"topRight":promptleftPosition+=g+f-30;e+=h;break;case"topLeft":e+=h;promptleftPosition+=g;break;case"centerRight":e=h+4;marginTopSize=0;promptleftPosition=g+a.outerWidth(true)+5;break;case"centerLeft":promptleftPosition=g-(b.width()+2);e=h+4;marginTopSize=0;break;case"center":promptleftPosition=(g)+(b.width()/2)+2;e=h+4;marginTopSize=0;break;case"bottomLeft":e=h+a.height()+5;marginTopSize=0;promptleftPosition=g;break;case"bottomRight":promptleftPosition=g+f-30;e=h+a.height()+5;marginTopSize=0;break;case"inline":promptleftPosition=0;e=0;marginTopSize=0};promptleftPosition+=n;e+=o;return{"callerTopPosition":e+"px","callerleftPosition":promptleftPosition+"px","marginTopSize":marginTopSize+"px"}},_saveOptions:function(a,b){if($.validationEngineLanguage)var c=$.validationEngineLanguage.allRules;else $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");$.validationEngine.defaults.allrules=c;var d=$.extend(true,{},$.validationEngine.defaults,b);a.data('jqv',d);return d},_getClassName:function(a){if(a)return a.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(a){return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1')},_condRequired:function(a,b,i,c){var d,dependingField;for(d=(i+1);d<b.length;d++){dependingField=jQuery("#"+b[d]).first();if(dependingField.length&&x._required(dependingField,["required"],0,c,true)==undefined){return x._required(a,["required"],0,c)}}},_submitButtonClick:function(a){var b=$(this);var c=b.closest('form, .validationEngineContainer');c.data("jqv_submitButton",b.attr("id"))}};$.fn.validationEngine=function(a){var b=$(this);if(!b[0])return b;if(typeof(a)=='string'&&a.charAt(0)!='_'&&x[a]){if(a!="showPrompt"&&a!="hide"&&a!="hideAll")x.init.apply(b);return x[a].apply(b,Array.prototype.slice.call(arguments,1))}else if(typeof a=='object'||!a){x.init.apply(b,arguments);return x.attach.apply(b)}else{$.error('Method '+a+' does not exist in jQuery.validationEngine')}};$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:false,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:'get',onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:true,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:true,autoHideDelay:10000,fadeDuration:0.3,prettySelect:true,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:true}};$(function(){$.validationEngine.defaults.promptPosition=x.isRTL()?'topLeft':"topRight"})})(jQuery);