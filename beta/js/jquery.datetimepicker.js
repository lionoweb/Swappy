(function($){'use strict';var o={i18n:{fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]}},value:'15:00',lang:'fr',format:'d/m/Y H:i',formatTime:'H:i',formatDate:'d/m/Y',startDate:false,step:30,monthChangeSpinner:true,closeOnDateSelect:true,closeOnTimeSelect:false,closeOnWithoutClick:true,closeOnInputClick:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,allowTimes:['00:00','00:30','01:00','01:30','02:00','02:30','03:00','03:30','04:00','04:30','05:00','05:30','06:00','06:30','07:00','07:30','08:00','08:30','09:00','09:30','10:00','10:30','11:00','11:30','12:00','12:30','13:00','13:30','14:00','14:30','15:00','15:30','16:00','16:30','17:00','17:30','18:00','18:30','19:00','19:30','20:00','20:30','21:00','21:30','22:00','22:30','23:00','23:30'],opened:false,initTime:true,inline:false,theme:'',onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:'xdsoft_next',prev:'xdsoft_prev',dayOfWeekStart:1,parentID:'body',timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:false,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:'',id:'',fixed:false,roundTime:'round',className:'',weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a,b){var i,j;for(i=(b||0),j=this.length;i<j;i+=1){if(this[i]===a){return i}}return-1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};$.fn.xdsoftScroller=function(g){return this.each(function(){var f=$(this),pointerEventToXY=function(e){var a={x:0,y:0},touch;if(e.type==='touchstart'||e.type==='touchmove'||e.type==='touchend'||e.type==='touchcancel'){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];a.x=touch.clientX;a.y=touch.clientY}else if(e.type==='mousedown'||e.type==='mouseup'||e.type==='mousemove'||e.type==='mouseover'||e.type==='mouseout'||e.type==='mouseenter'||e.type==='mouseleave'){a.x=e.clientX;a.y=e.clientY}return a},move=0,timebox,parentHeight,height,scrollbar,scroller,maximumOffset=100,start=false,startY=0,startTop=0,h1=0,touchStart=false,startTopScroll=0,calcOffset=function(){};if(g==='hide'){f.find('.xdsoft_scrollbar').hide();return}if(!$(this).hasClass('xdsoft_scroller_box')){timebox=f.children().eq(0);parentHeight=f[0].clientHeight;height=timebox[0].offsetHeight;scrollbar=$('<div class="xdsoft_scrollbar"></div>');scroller=$('<div class="xdsoft_scroller"></div>');scrollbar.append(scroller);f.addClass('xdsoft_scroller_box').append(scrollbar);calcOffset=function calcOffset(a){var b=pointerEventToXY(a).y-startY+startTopScroll;if(b<0){b=0}if(b+scroller[0].offsetHeight>h1){b=h1-scroller[0].offsetHeight}f.trigger('scroll_element.xdsoft_scroller',[maximumOffset?b/maximumOffset:0])};scroller.on('touchstart.xdsoft_scroller mousedown.xdsoft_scroller',function(a){if(!parentHeight){f.trigger('resize_scroll.xdsoft_scroller',[g])}startY=pointerEventToXY(a).y;startTopScroll=parseInt(scroller.css('margin-top'),10);h1=scrollbar[0].offsetHeight;if(a.type==='mousedown'){if(document){$(document.body).addClass('xdsoft_noselect')}$([document.body,window]).on('mouseup.xdsoft_scroller',function arguments_callee(){$([document.body,window]).off('mouseup.xdsoft_scroller',arguments_callee).off('mousemove.xdsoft_scroller',calcOffset).removeClass('xdsoft_noselect')});$(document.body).on('mousemove.xdsoft_scroller',calcOffset)}else{touchStart=true;a.stopPropagation();a.preventDefault()}}).on('touchmove',function(a){if(touchStart){a.preventDefault();calcOffset(a)}}).on('touchend touchcancel',function(a){touchStart=false;startTopScroll=0});f.on('scroll_element.xdsoft_scroller',function(a,b){if(!parentHeight){f.trigger('resize_scroll.xdsoft_scroller',[b,true])}b=b>1?1:(b<0||isNaN(b))?0:b;scroller.css('margin-top',maximumOffset*b);setTimeout(function(){timebox.css('marginTop',-parseInt((timebox[0].offsetHeight-parentHeight)*b,10))},10)}).on('resize_scroll.xdsoft_scroller',function(a,b,c){var d,sh;parentHeight=f[0].clientHeight;height=timebox[0].offsetHeight;d=parentHeight/height;sh=d*scrollbar[0].offsetHeight;if(d>1){scroller.hide()}else{scroller.show();scroller.css('height',parseInt(sh>10?sh:10,10));maximumOffset=scrollbar[0].offsetHeight-scroller[0].offsetHeight;if(c!==true){f.trigger('scroll_element.xdsoft_scroller',[b||Math.abs(parseInt(timebox.css('marginTop'),10))/(height-parentHeight)])}}});f.on('mousewheel',function(a){var b=Math.abs(parseInt(timebox.css('marginTop'),10));b=b-(a.deltaY*20);if(b<0){b=0}f.trigger('scroll_element.xdsoft_scroller',[b/(height-parentHeight)]);a.stopPropagation();return false});f.on('touchstart',function(a){start=pointerEventToXY(a);startTop=Math.abs(parseInt(timebox.css('marginTop'),10))});f.on('touchmove',function(a){if(start){a.preventDefault();var b=pointerEventToXY(a);f.trigger('scroll_element.xdsoft_scroller',[(startTop-(b.y-start.y))/(height-parentHeight)])}});f.on('touchend touchcancel',function(a){start=false;startTop=0})}f.trigger('resize_scroll.xdsoft_scroller',[g])})};$.fn.datetimepicker=function(l){var n=48,KEY9=57,_KEY0=96,_KEY9=105,CTRLKEY=17,DEL=46,ENTER=13,ESC=27,BACKSPACE=8,ARROWLEFT=37,ARROWUP=38,ARROWRIGHT=39,ARROWDOWN=40,TAB=9,F5=116,AKEY=65,CKEY=67,VKEY=86,ZKEY=90,YKEY=89,ctrlDown=false,options=($.isPlainObject(l)||!l)?$.extend(true,{},o,l):$.extend(true,{},o),lazyInitTimer=0,createDateTimePicker,destroyDateTimePicker,lazyInit=function(b){b.on('open.xdsoft focusin.xdsoft mousedown.xdsoft',function initOnActionCallback(a){if(b.is(':disabled')||b.data('xdsoft_datetimepicker')){return}clearTimeout(lazyInitTimer);lazyInitTimer=setTimeout(function(){if(!b.data('xdsoft_datetimepicker')){createDateTimePicker(b)}b.off('open.xdsoft focusin.xdsoft mousedown.xdsoft',initOnActionCallback).trigger('open.xdsoft')},100)})};createDateTimePicker=function(g){var k=$('<div '+(options.id?'id="'+options.id+'"':'')+' '+(options.style?'style="'+options.style+'"':'')+' class="xdsoft_datetimepicker xdsoft_'+options.theme+' xdsoft_noselect '+(options.weeks?' xdsoft_showweeks':'')+options.className+'"></div>'),xdsoft_copyright=$('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),datepicker=$('<div class="xdsoft_datepicker active"></div>'),mounth_picker=$('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next"></button></div>'),calendar=$('<div class="xdsoft_calendar"></div>'),timepicker=$('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),timeboxparent=timepicker.find('.xdsoft_time_box').eq(0),timebox=$('<div class="xdsoft_time_variant"></div>'),applyButton=$('<button class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),monthselect=$('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),yearselect=$('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),triggerAfterOpen=false,XDSoft_datetime,xchangeTimer,timerclick,current_time_index,setPos,timer=0,timer1=0,_xdsoft_datetime;mounth_picker.find('.xdsoft_month span').after(monthselect);mounth_picker.find('.xdsoft_year span').after(yearselect);mounth_picker.find('.xdsoft_month,.xdsoft_year').on('mousedown.xdsoft',function(a){var b=$(this).find('.xdsoft_select').eq(0),val=0,top=0,visible=b.is(':visible'),items,i;mounth_picker.find('.xdsoft_select').hide();if(_xdsoft_datetime.currentTime){val=_xdsoft_datetime.currentTime[$(this).hasClass('xdsoft_month')?'getMonth':'getFullYear']()}b[visible?'hide':'show']();for(items=b.find('div.xdsoft_option'),i=0;i<items.length;i+=1){if(items.eq(i).data('value')===val){break}else{top+=items[0].offsetHeight}}b.xdsoftScroller(top/(b.children()[0].offsetHeight-(b[0].clientHeight)));a.stopPropagation();return false});mounth_picker.find('.xdsoft_select').xdsoftScroller().on('mousedown.xdsoft',function(a){a.stopPropagation();a.preventDefault()}).on('mousedown.xdsoft','.xdsoft_option',function(a){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now()}var b=_xdsoft_datetime.currentTime.getFullYear();if(_xdsoft_datetime&&_xdsoft_datetime.currentTime){_xdsoft_datetime.currentTime[$(this).parent().parent().hasClass('xdsoft_monthselect')?'setMonth':'setFullYear']($(this).data('value'))}$(this).parent().parent().hide();k.trigger('xchange.xdsoft');if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(k,_xdsoft_datetime.currentTime,k.data('input'))}if(b!==_xdsoft_datetime.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(k,_xdsoft_datetime.currentTime,k.data('input'))}});k.setOptions=function(d){options=$.extend(true,{},options,d);if(d.allowTimes&&$.isArray(d.allowTimes)&&d.allowTimes.length){options.allowTimes=$.extend(true,[],d.allowTimes)}if(d.weekends&&$.isArray(d.weekends)&&d.weekends.length){options.weekends=$.extend(true,[],d.weekends)}if(d.disabledDates&&$.isArray(d.disabledDates)&&d.disabledDates.length){options.disabledDates=$.extend(true,[],d.disabledDates)}if((options.open||options.opened)&&(!options.inline)){g.trigger('open.xdsoft')}if(options.inline){triggerAfterOpen=true;k.addClass('xdsoft_inline');g.after(k).hide()}if(options.inverseButton){options.next='xdsoft_prev';options.prev='xdsoft_next'}if(options.datepicker){datepicker.addClass('active')}else{datepicker.removeClass('active')}if(options.timepicker){timepicker.addClass('active')}else{timepicker.removeClass('active')}if(options.value){if(g&&g.val){g.val(options.value)}_xdsoft_datetime.setCurrentTime(options.value)}if(isNaN(options.dayOfWeekStart)){options.dayOfWeekStart=0}else{options.dayOfWeekStart=parseInt(options.dayOfWeekStart,10)%7}if(!options.timepickerScrollbar){timeboxparent.xdsoftScroller('hide')}if(options.minDate&&/^-(.*)$/.test(options.minDate)){options.minDate=_xdsoft_datetime.strToDateTime(options.minDate).dateFormat(options.formatDate)}if(options.maxDate&&/^\+(.*)$/.test(options.maxDate)){options.maxDate=_xdsoft_datetime.strToDateTime(options.maxDate).dateFormat(options.formatDate)}applyButton.toggle(options.showApplyButton);mounth_picker.find('.xdsoft_today_button').css('visibility',!options.todayButton?'hidden':'visible');mounth_picker.find('.'+options.prev).css('visibility',!options.prevButton?'hidden':'visible');mounth_picker.find('.'+options.next).css('visibility',!options.nextButton?'hidden':'visible');if(options.mask){var e,getCaretPos=function(a){try{if(document.selection&&document.selection.createRange){var b=document.selection.createRange();return b.getBookmark().charCodeAt(2)-2}if(a.setSelectionRange){return a.selectionStart}}catch(e){return 0}},setCaretPos=function(a,b){a=(typeof a==="string"||a instanceof String)?document.getElementById(a):a;if(!a){return false}if(a.createTextRange){var c=a.createTextRange();c.collapse(true);c.moveEnd('character',b);c.moveStart('character',b);c.select();return true}if(a.setSelectionRange){a.setSelectionRange(b,b);return true}return false},isValidValue=function(a,b){var c=a.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,'\\$1').replace(/_/g,'{digit+}').replace(/([0-9]{1})/g,'{digit$1}').replace(/\{digit([0-9]{1})\}/g,'[0-$1_]{1}').replace(/\{digit[\+]\}/g,'[0-9_]{1}');return(new RegExp(c)).test(b)};g.off('keydown.xdsoft');if(options.mask===true){options.mask=options.format.replace(/Y/g,'9999').replace(/F/g,'9999').replace(/m/g,'19').replace(/d/g,'39').replace(/H/g,'29').replace(/i/g,'59').replace(/s/g,'59')}if($.type(options.mask)==='string'){if(!isValidValue(options.mask,g.val())){g.val(options.mask.replace(/[0-9]/g,'_'))}g.on('keydown.xdsoft',function(a){var b=this.value,key=a.which,pos,digit;if(((key>=n&&key<=KEY9)||(key>=_KEY0&&key<=_KEY9))||(key===BACKSPACE||key===DEL)){pos=getCaretPos(this);digit=(key!==BACKSPACE&&key!==DEL)?String.fromCharCode((_KEY0<=key&&key<=_KEY9)?key-n:key):'_';if((key===BACKSPACE||key===DEL)&&pos){pos-=1;digit='_'}while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1}b=b.substr(0,pos)+digit+b.substr(pos+1);if($.trim(b)===''){b=options.mask.replace(/[0-9]/g,'_')}else{if(pos===options.mask.length){a.preventDefault();return false}}pos+=(key===BACKSPACE||key===DEL)?0:1;while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1}if(isValidValue(options.mask,b)){this.value=b;setCaretPos(this,pos)}else if($.trim(b)===''){this.value=options.mask.replace(/[0-9]/g,'_')}else{g.trigger('error_input.xdsoft')}}else{if(([AKEY,CKEY,VKEY,ZKEY,YKEY].indexOf(key)!==-1&&ctrlDown)||[ESC,ARROWUP,ARROWDOWN,ARROWLEFT,ARROWRIGHT,F5,CTRLKEY,TAB,ENTER].indexOf(key)!==-1){return true}}a.preventDefault();return false})}}if(options.validateOnBlur){g.off('blur.xdsoft').on('blur.xdsoft',function(){if(options.allowBlank&&!$.trim($(this).val()).length){$(this).val(null);k.data('xdsoft_datetime').empty()}else if(!Date.parseDate($(this).val(),options.format)){var b=+([$(this).val()[0],$(this).val()[1]].join('')),splittedMinutes=+([$(this).val()[2],$(this).val()[3]].join(''));if(!options.datepicker&&options.timepicker&&b>=0&&b<24&&splittedMinutes>=0&&splittedMinutes<60){$(this).val([b,splittedMinutes].map(function(a){return a>9?a:'0'+a}).join(':'))}else{$(this).val((_xdsoft_datetime.now()).dateFormat(options.format))}k.data('xdsoft_datetime').setCurrentTime($(this).val())}else{k.data('xdsoft_datetime').setCurrentTime($(this).val())}k.trigger('changedatetime.xdsoft')})}options.dayOfWeekStartPrev=(options.dayOfWeekStart===0)?6:options.dayOfWeekStart-1;k.trigger('xchange.xdsoft').trigger('afterOpen.xdsoft')};k.data('options',options).on('mousedown.xdsoft',function(a){a.stopPropagation();a.preventDefault();yearselect.hide();monthselect.hide();return false});timeboxparent.append(timebox);timeboxparent.xdsoftScroller();k.on('afterOpen.xdsoft',function(){timeboxparent.xdsoftScroller()});k.append(datepicker).append(timepicker);if(options.withoutCopyright!==true){k.append(xdsoft_copyright)}datepicker.append(mounth_picker).append(calendar).append(applyButton);$(options.parentID).append(k);XDSoft_datetime=function(){var c=this;c.now=function(a){var d=new Date(),date,time;if(!a&&options.defaultDate){date=c.strToDate(options.defaultDate);d.setFullYear(date.getFullYear());d.setMonth(date.getMonth());d.setDate(date.getDate())}if(options.yearOffset){d.setFullYear(d.getFullYear()+options.yearOffset)}if(!a&&options.defaultTime){time=c.strtotime(options.defaultTime);d.setHours(time.getHours());d.setMinutes(time.getMinutes())}return d};c.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"){return false}return!isNaN(d.getTime())};c.setCurrentTime=function(a){c.currentTime=(typeof a==='string')?c.strToDateTime(a):c.isValidDate(a)?a:c.now();k.trigger('xchange.xdsoft')};c.empty=function(){c.currentTime=null};c.getCurrentTime=function(a){return c.currentTime};c.nextMonth=function(){if(c.currentTime===undefined||c.currentTime===null){c.currentTime=c.now()}var a=c.currentTime.getMonth()+1,year;if(a===12){c.currentTime.setFullYear(c.currentTime.getFullYear()+1);a=0}year=c.currentTime.getFullYear();c.currentTime.setDate(Math.min(new Date(c.currentTime.getFullYear(),a+1,0).getDate(),c.currentTime.getDate()));c.currentTime.setMonth(a);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(k,_xdsoft_datetime.currentTime,k.data('input'))}if(year!==c.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(k,_xdsoft_datetime.currentTime,k.data('input'))}k.trigger('xchange.xdsoft');return a};c.prevMonth=function(){if(c.currentTime===undefined||c.currentTime===null){c.currentTime=c.now()}var a=c.currentTime.getMonth()-1;if(a===-1){c.currentTime.setFullYear(c.currentTime.getFullYear()-1);a=11}c.currentTime.setDate(Math.min(new Date(c.currentTime.getFullYear(),a+1,0).getDate(),c.currentTime.getDate()));c.currentTime.setMonth(a);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(k,_xdsoft_datetime.currentTime,k.data('input'))}k.trigger('xchange.xdsoft');return a};c.getWeekOfYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((((a-b)/86400000)+b.getDay()+1)/7)};c.strToDateTime=function(a){var b=[],timeOffset,currentTime;if(a&&a instanceof Date&&c.isValidDate(a)){return a}b=/^(\+|\-)(.*)$/.exec(a);if(b){b[2]=Date.parseDate(b[2],options.formatDate)}if(b&&b[2]){timeOffset=b[2].getTime()-(b[2].getTimezoneOffset())*60000;currentTime=new Date((_xdsoft_datetime.now()).getTime()+parseInt(b[1]+'1',10)*timeOffset)}else{currentTime=a?Date.parseDate(a,options.format):c.now()}if(!c.isValidDate(currentTime)){currentTime=c.now()}return currentTime};c.strToDate=function(a){if(a&&a instanceof Date&&c.isValidDate(a)){return a}var b=a?Date.parseDate(a,options.formatDate):c.now(true);if(!c.isValidDate(b)){b=c.now(true)}return b};c.strtotime=function(a){if(a&&a instanceof Date&&c.isValidDate(a)){return a}var b=a?Date.parseDate(a,options.formatTime):c.now(true);if(!c.isValidDate(b)){b=c.now(true)}return b};c.str=function(){return c.currentTime.dateFormat(options.format)};c.currentTime=this.now()};_xdsoft_datetime=new XDSoft_datetime();applyButton.on('click',function(e){e.preventDefault();k.data('changed',true);_xdsoft_datetime.setCurrentTime(getCurrentValue());g.val(_xdsoft_datetime.str());k.trigger('close.xdsoft')});mounth_picker.find('.xdsoft_today_button').on('mousedown.xdsoft',function(){k.data('changed',true);_xdsoft_datetime.setCurrentTime(0);k.trigger('afterOpen.xdsoft')}).on('dblclick.xdsoft',function(){g.val(_xdsoft_datetime.str());k.trigger('close.xdsoft')});mounth_picker.find('.xdsoft_prev,.xdsoft_next').on('mousedown.xdsoft',function(){var a=$(this),timer=0,stop=false;(function arguments_callee1(v){if(a.hasClass(options.next)){_xdsoft_datetime.nextMonth()}else if(a.hasClass(options.prev)){_xdsoft_datetime.prevMonth()}if(options.monthChangeSpinner){if(!stop){timer=setTimeout(arguments_callee1,v||100)}}}(500));$([document.body,window]).on('mouseup.xdsoft',function arguments_callee2(){clearTimeout(timer);stop=true;$([document.body,window]).off('mouseup.xdsoft',arguments_callee2)})});timepicker.find('.xdsoft_prev,.xdsoft_next').on('mousedown.xdsoft',function(){var b=$(this),timer=0,stop=false,period=110;(function arguments_callee4(v){var a=timeboxparent[0].clientHeight,height=timebox[0].offsetHeight,top=Math.abs(parseInt(timebox.css('marginTop'),10));if(b.hasClass(options.next)&&(height-a)-options.timeHeightInTimePicker>=top){timebox.css('marginTop','-'+(top+options.timeHeightInTimePicker)+'px')}else if(b.hasClass(options.prev)&&top-options.timeHeightInTimePicker>=0){timebox.css('marginTop','-'+(top-options.timeHeightInTimePicker)+'px')}timeboxparent.trigger('scroll_element.xdsoft_scroller',[Math.abs(parseInt(timebox.css('marginTop'),10)/(height-a))]);period=(period>10)?10:period-10;if(!stop){timer=setTimeout(arguments_callee4,v||period)}}(500));$([document.body,window]).on('mouseup.xdsoft',function arguments_callee5(){clearTimeout(timer);stop=true;$([document.body,window]).off('mouseup.xdsoft',arguments_callee5)})});xchangeTimer=0;k.on('xchange.xdsoft',function(f){clearTimeout(xchangeTimer);xchangeTimer=setTimeout(function(){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now()}var e='',start=new Date(_xdsoft_datetime.currentTime.getFullYear(),_xdsoft_datetime.currentTime.getMonth(),1,12,0,0),i=0,j,today=_xdsoft_datetime.now(),maxDate=false,minDate=false,d,y,m,w,classes=[],customDateSettings,newRow=true,time='',h='',line_time;while(start.getDay()!==options.dayOfWeekStart){start.setDate(start.getDate()-1)}e+='<table><thead><tr>';if(options.weeks){e+='<th></th>'}for(j=0;j<7;j+=1){e+='<th>'+options.i18n[options.lang].dayOfWeek[(j+options.dayOfWeekStart)%7]+'</th>'}e+='</tr></thead>';e+='<tbody>';if(options.maxDate!==false){maxDate=_xdsoft_datetime.strToDate(options.maxDate);maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate(),23,59,59,999)}if(options.minDate!==false){minDate=_xdsoft_datetime.strToDate(options.minDate);minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate())}while(i<_xdsoft_datetime.currentTime.countDaysInMonth()||start.getDay()!==options.dayOfWeekStart||_xdsoft_datetime.currentTime.getMonth()===start.getMonth()){classes=[];i+=1;d=start.getDate();y=start.getFullYear();m=start.getMonth();w=_xdsoft_datetime.getWeekOfYear(start);classes.push('xdsoft_date');if(options.beforeShowDay&&$.isFunction(options.beforeShowDay.call)){customDateSettings=options.beforeShowDay.call(k,start)}else{customDateSettings=null}if((maxDate!==false&&start>maxDate)||(minDate!==false&&start<minDate)||(customDateSettings&&customDateSettings[0]===false)){classes.push('xdsoft_disabled')}else if(options.disabledDates.indexOf(start.dateFormat(options.formatDate))!==-1){classes.push('xdsoft_disabled')}if(customDateSettings&&customDateSettings[1]!==""){classes.push(customDateSettings[1])}if(_xdsoft_datetime.currentTime.getMonth()!==m){classes.push('xdsoft_other_month')}if((options.defaultSelect||k.data('changed'))&&_xdsoft_datetime.currentTime.dateFormat(options.formatDate)===start.dateFormat(options.formatDate)){classes.push('xdsoft_current')}if(today.dateFormat(options.formatDate)===start.dateFormat(options.formatDate)){classes.push('xdsoft_today')}if(start.getDay()===0||start.getDay()===6||~options.weekends.indexOf(start.dateFormat(options.formatDate))){classes.push('xdsoft_weekend')}if(options.beforeShowDay&&$.isFunction(options.beforeShowDay)){classes.push(options.beforeShowDay(start))}if(newRow){e+='<tr>';newRow=false;if(options.weeks){e+='<th>'+w+'</th>'}}e+='<td data-date="'+d+'" data-month="'+m+'" data-year="'+y+'"'+' class="xdsoft_date xdsoft_day_of_week'+start.getDay()+' '+classes.join(' ')+'">'+'<div>'+d+'</div>'+'</td>';if(start.getDay()===options.dayOfWeekStartPrev){e+='</tr>';newRow=true}start.setDate(d+1)}e+='</tbody></table>';calendar.html(e);mounth_picker.find('.xdsoft_label span').eq(0).text(options.i18n[options.lang].months[_xdsoft_datetime.currentTime.getMonth()]);mounth_picker.find('.xdsoft_label span').eq(1).text(_xdsoft_datetime.currentTime.getFullYear());time='';h='';m='';line_time=function line_time(h,m){var a=_xdsoft_datetime.now();a.setHours(h);h=parseInt(a.getHours(),10);a.setMinutes(m);m=parseInt(a.getMinutes(),10);var b=new Date(_xdsoft_datetime.currentTime);b.setHours(h);b.setMinutes(m);classes=[];if((options.minDateTime!==false&&options.minDateTime>b)||(options.maxTime!==false&&_xdsoft_datetime.strtotime(options.maxTime).getTime()<a.getTime())||(options.minTime!==false&&_xdsoft_datetime.strtotime(options.minTime).getTime()>a.getTime())){classes.push('xdsoft_disabled')}var c=new Date(_xdsoft_datetime.currentTime);c.setHours(parseInt(_xdsoft_datetime.currentTime.getHours(),10));c.setMinutes(Math[options.roundTime](_xdsoft_datetime.currentTime.getMinutes()/options.step)*options.step);if((options.initTime||options.defaultSelect||k.data('changed'))&&c.getHours()===parseInt(h,10)&&(options.step>59||c.getMinutes()===parseInt(m,10))){if(options.defaultSelect||k.data('changed')){classes.push('xdsoft_current')}else if(options.initTime){classes.push('xdsoft_init_time')}}if(parseInt(today.getHours(),10)===parseInt(h,10)&&parseInt(today.getMinutes(),10)===parseInt(m,10)){classes.push('xdsoft_today')}time+='<div class="xdsoft_time '+classes.join(' ')+'" data-hour="'+h+'" data-minute="'+m+'">'+a.dateFormat(options.formatTime)+'</div>'};if(!options.allowTimes||!$.isArray(options.allowTimes)||!options.allowTimes.length){for(i=0,j=0;i<(options.hours12?12:24);i+=1){for(j=0;j<60;j+=options.step){h=(i<10?'0':'')+i;m=(j<10?'0':'')+j;line_time(h,m)}}}else{for(i=0;i<options.allowTimes.length;i+=1){h=_xdsoft_datetime.strtotime(options.allowTimes[i]).getHours();m=_xdsoft_datetime.strtotime(options.allowTimes[i]).getMinutes();line_time(h,m)}}timebox.html(time);l='';i=0;for(i=parseInt(options.yearStart,10)+options.yearOffset;i<=parseInt(options.yearEnd,10)+options.yearOffset;i+=1){l+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getFullYear()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+i+'</div>'}yearselect.children().eq(0).html(l);for(i=parseInt(options.monthStart),l='';i<=parseInt(options.monthEnd);i+=1){l+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getMonth()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+options.i18n[options.lang].months[i]+'</div>'}monthselect.children().eq(0).html(l);$(k).trigger('generate.xdsoft')},10);f.stopPropagation()}).on('afterOpen.xdsoft',function(){if(options.timepicker){var a,pheight,height,top;if(timebox.find('.xdsoft_current').length){a='.xdsoft_current'}else if(timebox.find('.xdsoft_init_time').length){a='.xdsoft_init_time'}if(a){pheight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;top=timebox.find(a).index()*options.timeHeightInTimePicker+1;if((height-pheight)<top){top=height-pheight}timeboxparent.trigger('scroll_element.xdsoft_scroller',[parseInt(top,10)/(height-pheight)])}else{timeboxparent.trigger('scroll_element.xdsoft_scroller',[0])}}});timerclick=0;calendar.on('click.xdsoft','td',function(a){a.stopPropagation();timerclick+=1;var b=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime}if(b.hasClass('xdsoft_disabled')){return false}currentTime.setDate(1);currentTime.setFullYear(b.data('year'));currentTime.setMonth(b.data('month'));currentTime.setDate(b.data('date'));k.trigger('select.xdsoft',[currentTime]);g.val(_xdsoft_datetime.str());if((timerclick>1||(options.closeOnDateSelect===true||(options.closeOnDateSelect===0&&!options.timepicker)))&&!options.inline){k.trigger('close.xdsoft')}if(options.onSelectDate&&$.isFunction(options.onSelectDate)){options.onSelectDate.call(k,_xdsoft_datetime.currentTime,k.data('input'),a)}k.data('changed',true);k.trigger('xchange.xdsoft');k.trigger('changedatetime.xdsoft');setTimeout(function(){timerclick=0},200)});timebox.on('click.xdsoft','div',function(a){a.stopPropagation();var b=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime}if(b.hasClass('xdsoft_disabled')){return false}currentTime.setHours(b.data('hour'));currentTime.setMinutes(b.data('minute'));k.trigger('select.xdsoft',[currentTime]);k.data('input').val(_xdsoft_datetime.str());if(options.inline!==true&&options.closeOnTimeSelect===true){k.trigger('close.xdsoft')}if(options.onSelectTime&&$.isFunction(options.onSelectTime)){options.onSelectTime.call(k,_xdsoft_datetime.currentTime,k.data('input'),a)}k.data('changed',true);k.trigger('xchange.xdsoft');k.trigger('changedatetime.xdsoft')});datepicker.on('mousewheel.xdsoft',function(a){if(!options.scrollMonth){return true}if(a.deltaY<0){_xdsoft_datetime.nextMonth()}else{_xdsoft_datetime.prevMonth()}return false});g.on('mousewheel.xdsoft',function(a){if(!options.scrollInput){return true}if(!options.datepicker&&options.timepicker){current_time_index=timebox.find('.xdsoft_current').length?timebox.find('.xdsoft_current').eq(0).index():0;if(current_time_index+a.deltaY>=0&&current_time_index+a.deltaY<timebox.children().length){current_time_index+=a.deltaY}if(timebox.children().eq(current_time_index).length){timebox.children().eq(current_time_index).trigger('mousedown')}return false}if(options.datepicker&&!options.timepicker){datepicker.trigger(a,[a.deltaY,a.deltaX,a.deltaY]);if(g.val){g.val(_xdsoft_datetime.str())}k.trigger('changedatetime.xdsoft');return false}});k.on('changedatetime.xdsoft',function(a){if(options.onChangeDateTime&&$.isFunction(options.onChangeDateTime)){var b=k.data('input');options.onChangeDateTime.call(k,_xdsoft_datetime.currentTime,b,a);delete options.value;b.trigger('change')}}).on('generate.xdsoft',function(){if(options.onGenerate&&$.isFunction(options.onGenerate)){options.onGenerate.call(k,_xdsoft_datetime.currentTime,k.data('input'))}if(triggerAfterOpen){k.trigger('afterOpen.xdsoft');triggerAfterOpen=false}}).on('click.xdsoft',function(a){a.stopPropagation()});current_time_index=0;setPos=function(){var a=k.data('input').offset(),top=a.top+k.data('input')[0].offsetHeight-1,left=a.left,position="absolute";if(options.fixed){top-=$(window).scrollTop();left-=$(window).scrollLeft();position="fixed"}else{if(top+k[0].offsetHeight>$(window).height()+$(window).scrollTop()){top=a.top-k[0].offsetHeight+1}if(top<0){top=0}if(left+k[0].offsetWidth>$(window).width()){left=$(window).width()-k[0].offsetWidth}}k.css({left:left,top:top,position:position})};k.on('open.xdsoft',function(a){var b=true;if(options.onShow&&$.isFunction(options.onShow)){b=options.onShow.call(k,_xdsoft_datetime.currentTime,k.data('input'),a)}if(b!==false){k.show();setPos();$(window).off('resize.xdsoft',setPos).on('resize.xdsoft',setPos);if(options.closeOnWithoutClick){$([document.body,window]).on('mousedown.xdsoft',function arguments_callee6(){k.trigger('close.xdsoft');$([document.body,window]).off('mousedown.xdsoft',arguments_callee6)})}}}).on('close.xdsoft',function(a){var b=true;mounth_picker.find('.xdsoft_month,.xdsoft_year').find('.xdsoft_select').hide();if(options.onClose&&$.isFunction(options.onClose)){b=options.onClose.call(k,_xdsoft_datetime.currentTime,k.data('input'),a)}if(b!==false&&!options.opened&&!options.inline){k.hide()}a.stopPropagation()}).on('toggle.xdsoft',function(a){if(k.is(':visible')){k.trigger('close.xdsoft')}else{k.trigger('open.xdsoft')}}).data('input',g);timer=0;timer1=0;k.data('xdsoft_datetime',_xdsoft_datetime);k.setOptions(options);function getCurrentValue(){var a=false,time;if(options.startDate){a=_xdsoft_datetime.strToDate(options.startDate)}else{a=options.value||((g&&g.val&&g.val())?g.val():'');if(a){a=_xdsoft_datetime.strToDateTime(a)}else if(options.defaultDate){a=_xdsoft_datetime.strToDate(options.defaultDate);if(options.defaultTime){time=_xdsoft_datetime.strtotime(options.defaultTime);a.setHours(time.getHours());a.setMinutes(time.getMinutes())}}}if(a&&_xdsoft_datetime.isValidDate(a)){k.data('changed',true)}else{a=''}return a||0}_xdsoft_datetime.setCurrentTime(getCurrentValue());g.data('xdsoft_datetimepicker',k).on('open.xdsoft focusin.xdsoft mousedown.xdsoft',function(a){if(g.is(':disabled')||(g.data('xdsoft_datetimepicker').is(':visible')&&options.closeOnInputClick)){return}clearTimeout(timer);timer=setTimeout(function(){if(g.is(':disabled')){return}triggerAfterOpen=true;_xdsoft_datetime.setCurrentTime(getCurrentValue());k.trigger('open.xdsoft')},100)}).on('keydown.xdsoft',function(a){var b=this.value,elementSelector,key=a.which;if([ENTER].indexOf(key)!==-1&&options.enterLikeTab){elementSelector=$("input:visible,textarea:visible");k.trigger('close.xdsoft');elementSelector.eq(elementSelector.index(this)+1).focus();return false}if([TAB].indexOf(key)!==-1){k.trigger('close.xdsoft');return true}})};destroyDateTimePicker=function(a){var b=a.data('xdsoft_datetimepicker');if(b){b.data('xdsoft_datetime',null);b.remove();a.data('xdsoft_datetimepicker',null).off('.xdsoft');$(window).off('resize.xdsoft');$([window,document.body]).off('mousedown.xdsoft');if(a.unmousewheel){a.unmousewheel()}}};$(document).off('keydown.xdsoftctrl keyup.xdsoftctrl').on('keydown.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=true}}).on('keyup.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=false}});return this.each(function(){var a=$(this).data('xdsoft_datetimepicker');if(a){if($.type(l)==='string'){switch(l){case'show':$(this).select().focus();a.trigger('open.xdsoft');break;case'hide':a.trigger('close.xdsoft');break;case'toggle':a.trigger('toggle.xdsoft');break;case'destroy':destroyDateTimePicker($(this));break;case'reset':this.value=this.defaultValue;if(!this.value||!a.data('xdsoft_datetime').isValidDate(Date.parseDate(this.value,options.format))){a.data('changed',false)}a.data('xdsoft_datetime').setCurrentTime(this.value);break;case'validate':var b=a.data('input');b.trigger('blur.xdsoft');break}}else{a.setOptions(l)}return 0}if($.type(l)!=='string'){if(!options.lazyInit||options.open||options.inline){createDateTimePicker($(this))}else{lazyInit($(this))}}})};$.fn.datetimepicker.defaults=o}(jQuery));(function(){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(b){if(b=="unixtime"){return parseInt(this.getTime()/1000)}if(Date.formatFunctions[b]==null){Date.createNewFormat(b)}var a=Date.formatFunctions[b];return this[a]()};Date.createNewFormat=function(a){var b="format"+Date.formatFunctions.count++;Date.formatFunctions[a]=b;var c="Date.prototype."+b+" = function() {return ";var d="";var e=false;var f="";for(var i=0;i<a.length;++i){f=a.charAt(i);if(!e&&f=="\\"){e=true}else{if(e){e=false;d+="'"+String.escape(f)+"' + "}else{d+=Date.getFormatCode(f)}}}if(d.length==0){d="\"\""}else{d=d.substring(0,d.length-3)}eval(c+d+";}")};Date.getFormatCode=function(a){switch(a){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}};Date.parseDate=function(a,c){if(c=="unixtime"){return new Date(!isNaN(parseInt(a))?parseInt(a)*1000:0)}if(Date.parseFunctions[c]==null){Date.createParser(c)}var b=Date.parseFunctions[c];return Date[b](a)};Date.createParser=function(a){var b="parse"+Date.parseFunctions.count++;var c=Date.parseRegexes.length;var d=1;Date.parseFunctions[a]=b;var e="Date."+b+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+c+"]);\nif (results && results.length > 0) {";var f="";var g=false;var h="";for(var i=0;i<a.length;++i){h=a.charAt(i);if(!g&&h=="\\"){g=true}else{if(g){g=false;f+=String.escape(h)}else{obj=Date.formatCodeToRegex(h,d);d+=obj.g;f+=obj.s;if(obj.g&&obj.c){e+=obj.c}}}}e+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}";e+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}";Date.parseRegexes[c]=new RegExp("^"+f+"$");eval(e)};Date.formatCodeToRegex=function(b,a){switch(b){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+a+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+a+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+a+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+a+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+a+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+a+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(b)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b){a+=Date.daysInMonth[b]}return a+this.getDate()};Date.prototype.getWeekOfYear=function(){var b=this.getDayOfYear()+(4-this.getDay());var a=new Date(this.getFullYear(),0,1);var c=(7-a.getDay()+4);return String.leftPad(Math.ceil((b-c)/7)+1,2,"0")};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return((a&3)==0&&(a%100||(a%400==0&&a)))};Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a};Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(a<0)?(a+7):a};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")};String.leftPad=function(d,b,c){var a=new String(d);if(c==null){c=" "}while(a.length<b){a=c+a}return a};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}());