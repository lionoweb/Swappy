function isElementVisible(e){var t=$("nav").height()+50;$(".nav-h.visible").length>0&&(t+=30);var a=$(window).scrollTop()+t+30,r=a+$(window).height()-(t+60),i=$(e).offset().top,s=i+$(e).height();return r>=s&&i>=a}!function(e){"use strict";var t={init:function(a){var r=this;return r.data("jqv")&&null!=r.data("jqv")||(a=t._saveOptions(r,a),e(document).on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})})),this},attach:function(a){var r,i=this;return r=a?t._saveOptions(i,a):i.data("jqv"),r.validateAttribute=i.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",r.binded&&(i.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),i.on("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),i.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)),r.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:i},t.updatePromptsPosition),i.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),i.removeData("jqv_submitButton"),i.on("submit",t._onSubmitEvent),this},detach:function(){var a=this,r=a.data("jqv");return a.find("["+r.validateAttribute+"*=validate]").not("[type=checkbox]").off(r.validationEventTrigger,t._onFieldEvent),a.find("["+r.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",t._onFieldEvent),a.off("submit",t.onAjaxFormComplete),a.off("submit",t.onAjaxFormComplete),a.removeData("jqv"),a.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),a.removeData("jqv_submitButton"),r.autoPositionUpdate&&e(window).unbind("resize",t.updatePromptsPosition),this},validate:function(){var a=e(this),r=null;if(a.is("form")||a.hasClass("validationEngineContainer")){if(a.hasClass("validating"))return!1;a.addClass("validating");var i=a.data("jqv"),r=t._validateFields(this);setTimeout(function(){a.removeClass("validating")},100),r&&i.onSuccess?i.onSuccess():!r&&i.onFailure&&i.onFailure()}else if(a.is("form")||a.hasClass("validationEngineContainer"))a.removeClass("validating");else{var s=a.closest("form, .validationEngineContainer"),i=s.data("jqv")?s.data("jqv"):e.validationEngine.defaults,r=t._validateField(a,i);r&&i.onFieldSuccess?i.onFieldSuccess():i.onFieldFailure&&i.InvalidFields.length>0&&i.onFieldFailure()}return i.onValidationComplete?!!i.onValidationComplete(s,r):r},updatePromptsPosition:function(a){if(a&&this==window)var r=a.data.formElem,i=a.data.noAnimation;else var r=e(this.closest("form, .validationEngineContainer"));var s=r.data("jqv");return r.find("["+s.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=e(this);s.prettySelect&&a.is(":hidden")&&(a=r.find("#"+s.usePrefix+a.attr("id")+s.useSuffix));var o=t._getPrompt(a),n=e(o).find(".formErrorContent").html();o&&t._updatePrompt(a,e(o),n,void 0,!1,s,i)}),this},showPrompt:function(e,a,r,i,s){if("undefined"==typeof s)var s=!1;var o=this.closest("form, .validationEngineContainer"),n=o.data("jqv");return n||(n=t._saveOptions(this,n)),r&&(n.promptPosition=r),n.showArrow=1==i,t._showPrompt(this,e,a,!1,n,!1,s),this},hide:function(){var a,r=e(this).closest("form, .validationEngineContainer"),i=r.data("jqv"),s=i&&i.fadeDuration?i.fadeDuration:.3;return a=e(this).is("form")||e(this).hasClass("validationEngineContainer")?"parentForm"+t._getClassName(e(this).attr("id")):t._getClassName(e(this).attr("id"))+"formError",e("."+a).fadeTo(s,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},hideAll:function(){var t=this,a=t.data("jqv"),r=a?a.fadeDuration:300;return e(".formError").fadeTo(r,300,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},_onFieldEvent:function(a){var r=e(this),i=r.closest("form, .validationEngineContainer"),s=i.data("jqv");s.eventTrigger="field",window.setTimeout(function(){t._validateField(r,s),0==s.InvalidFields.length&&s.onFieldSuccess?s.onFieldSuccess():s.InvalidFields.length>0&&s.onFieldFailure&&s.onFieldFailure()},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=e(this),r=a.data("jqv");if(a.data("jqv_submitButton")){var i=e("#"+a.data("jqv_submitButton"));if(i&&i.length>0&&(i.hasClass("validate-skip")||"true"==i.attr("data-validation-engine-skip")))return!0}r.eventTrigger="submit";var s=t._validateFields(a);return s&&r.ajaxFormValidation?(t._validateFormWithAjax(a,r),!1):r.onValidationComplete?!!r.onValidationComplete(a,s):s},_checkAjaxStatus:function(t){var a=!0;return e.each(t.ajaxValidCache,function(e,t){return t?void 0:(a=!1,!1)}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var r=a.data("jqv"),i=!1;a.trigger("jqv.form.validating");var s=null;if(a.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var o=e(this),n=[];if(e.inArray(o.attr("name"),n)<0){if(i|=t._validateField(o,r),i&&null==s&&(s=o.is(":hidden")&&r.prettySelect?o=a.find("#"+r.usePrefix+t._jqSelector(o.attr("id"))+r.useSuffix):o),r.doNotShowAllErrosOnSubmit)return!1;if(n.push(o.attr("name")),1==r.showOneMessage&&i)return!1}}),a.trigger("jqv.form.result",[i]),null!=s)var o=s.parent().html();else var o="";if(i){if(r.scroll&&o.match(/BlackPopup/gi)){var n=s.offset().top,l=s.offset().left,d=r.promptPosition;if("string"==typeof d&&-1!=d.indexOf(":")&&(d=d.substring(0,d.indexOf(":"))),"bottomRight"!=d&&"bottomLeft"!=d){var u=t._getPrompt(s);u&&(n=u.offset().top)}if(r.scrollOffset&&(n-=r.scrollOffset),r.isOverflown){var f=0;if(e(".nav-h.visible").length>0&&(f=30),!isElementVisible(s)&&r.canScroll){var c=e(r.overflownDIV);if(!c.length)return!1;var v=c.scrollTop(),p=-parseInt(c.offset().top)-(e("nav").height()+30+f);n+=v+p-5;var m=e(r.overflownDIV+":not(:animated)");m.animate({scrollTop:n},900,function(){r.focusFirstField&&s.focus()})}}else{var f=0;e(".nav-h.visible").length>0&&(f=30),!isElementVisible(s)&&r.canScroll&&(e("html, body").animate({scrollTop:n-(e("nav").height()+30+f)},900,function(){r.focusFirstField&&s.focus()}),e("html, body").animate({scrollLeft:l},900))}}else r.focusFirstField&&s.focus();return!1}return!0},_validateFormWithAjax:function(a,r){var i=a.serialize(),s=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:"GET",o=r.ajaxFormValidationURL?r.ajaxFormValidationURL:a.attr("action"),n=r.dataType?r.dataType:"json";e.ajax({type:s,url:o,cache:!1,dataType:n,data:i,form:a,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(a,r)},error:function(e,a){t._ajaxError(e,a)},success:function(i){if("json"==n&&i!==!0){for(var s=!1,o=0;o<i.length;o++){var l=i[o],d=l[0],u=e(e("#"+d)[0]);if(1==u.length){var f=l[2];if(1==l[1])if(""!=f&&f){if(r.allrules[f]){var c=r.allrules[f].alertTextOk;c&&(f=c)}r.showPrompts&&t._showPrompt(field,f,"pass",!1,r,!0)}else t._closePrompt(u);else{if(s|=!0,r.allrules[f]){var c=r.allrules[f].alertText;c&&(f=c)}r.showPrompts&&t._showPrompt(field,f,"",!1,r,!0)}}}r.onAjaxFormComplete(!s,a,i,r)}else r.onAjaxFormComplete(!0,a,i,r)}})},_validateField:function(a,r,i){if(a.attr("id")||(a.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),!r.validateNonVisibleFields&&(a.is(":hidden")&&!r.prettySelect||a.parent().is(":hidden")))return!1;var s=a.attr(r.validateAttribute),o=/validate\[(.*)\]/.exec(s);if(!o)return!1;var n=o[1],l=n.split(/\[|,|\]/),d=!1,u=a.attr("name"),f="",c="",v=!1,p=!1;r.isError=!1,r.showArrow=!0,r.maxErrorsPerField>0&&(p=!0);for(var m=e(a.closest("form, .validationEngineContainer")),h=0;h<l.length;h++)l[h]=l[h].replace(" ",""),""===l[h]&&delete l[h];for(var h=0,g=0;h<l.length;h++){if(p&&g>=r.maxErrorsPerField){if(!v){var _=e.inArray("required",l);v=-1!=_&&_>=h}break}var x=void 0;switch(l[h]){case"required":v=!0,x=t._getErrorMessage(m,a,l[h],l,h,r,t._required);break;case"custom":x=t._getErrorMessage(m,a,l[h],l,h,r,t._custom);break;case"groupRequired":var b="["+r.validateAttribute+"*="+l[h+1]+"]",C=m.find(b).eq(0);C[0]!=a[0]&&(t._validateField(C,r,i),r.showArrow=!0),x=t._getErrorMessage(m,a,l[h],l,h,r,t._groupRequired),x&&(v=!0),r.showArrow=!1;break;case"ajax":x=t._ajax(a,l,h,r),x&&(c="load");break;case"minSize":x=t._getErrorMessage(m,a,l[h],l,h,r,t._minSize);break;case"maxSize":x=t._getErrorMessage(m,a,l[h],l,h,r,t._maxSize);break;case"min":x=t._getErrorMessage(m,a,l[h],l,h,r,t._min);break;case"max":x=t._getErrorMessage(m,a,l[h],l,h,r,t._max);break;case"past":x=t._getErrorMessage(m,a,l[h],l,h,r,t._past);break;case"future":x=t._getErrorMessage(m,a,l[h],l,h,r,t._future);break;case"dateRange":var b="["+r.validateAttribute+"*="+l[h+1]+"]";r.firstOfGroup=m.find(b).eq(0),r.secondOfGroup=m.find(b).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(x=t._getErrorMessage(m,a,l[h],l,h,r,t._dateRange)),x&&(v=!0),r.showArrow=!1;break;case"dateTimeRange":var b="["+r.validateAttribute+"*="+l[h+1]+"]";r.firstOfGroup=m.find(b).eq(0),r.secondOfGroup=m.find(b).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(x=t._getErrorMessage(m,a,l[h],l,h,r,t._dateTimeRange)),x&&(v=!0),r.showArrow=!1;break;case"maxCheckbox":a=e(m.find("input[name='"+u+"']")),x=t._getErrorMessage(m,a,l[h],l,h,r,t._maxCheckbox);break;case"minCheckbox":a=e(m.find("input[name='"+u+"']")),x=t._getErrorMessage(m,a,l[h],l,h,r,t._minCheckbox);break;case"equals":x=t._getErrorMessage(m,a,l[h],l,h,r,t._equals);break;case"equalsPASS":x=t._getErrorMessage(m,a,l[h],l,h,r,t._equalsPASS);break;case"timeCheck":x=t._getErrorMessage(m,a,l[h],l,h,r,t._timeCheck);break;case"funcCall":x=t._getErrorMessage(m,a,l[h],l,h,r,t._funcCall);break;case"creditCard":x=t._getErrorMessage(m,a,l[h],l,h,r,t._creditCard);break;case"condRequired":x=t._getErrorMessage(m,a,l[h],l,h,r,t._condRequired),void 0!==x&&(v=!0)}var E=!1;if("object"==typeof x)switch(x.status){case"_break":E=!0;break;case"_error":x=x.message;break;case"_error_no_prompt":return!0}if(E)break;"string"==typeof x&&(f+=x+"<br/>",r.isError=!0,g++)}!v&&!a.val()&&a.val().length<1&&(r.isError=!1);var T=a.prop("type"),k=a.data("promptPosition")||r.promptPosition;("radio"==T||"checkbox"==T)&&m.find("input[name='"+u+"']").size()>1&&(a=e("inline"===k?m.find("input[name='"+u+"'][type!=hidden]:last"):m.find("input[name='"+u+"'][type!=hidden]:first")),r.showArrow=!1),a.is(":hidden")&&r.prettySelect&&(a=m.find("#"+r.usePrefix+t._jqSelector(a.attr("id"))+r.useSuffix)),r.isError&&r.showPrompts?t._showPrompt(a,f,c,!1,r):d||t._closePrompt(a),d||a.trigger("jqv.field.result",[a,r.isError,f]);var F=e.inArray(a[0],r.InvalidFields);return-1==F?r.isError&&r.InvalidFields.push(a[0]):r.isError||r.InvalidFields.splice(F,1),t._handleStatusCssClasses(a,r),r.isError&&r.onFieldFailure&&r.onFieldFailure(a),!r.isError&&r.onFieldSuccess&&r.onFieldSuccess(a),r.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(a,r,i,s,o,n,l){var d=jQuery.inArray(i,s);if("custom"===i||"funcCall"===i){var u=s[d+1];i=i+"["+u+"]",delete s[d]}var f,c=i,v=r.attr(r.attr("data-validation-engine")?"data-validation-engine":"class"),p=v.split(" ");if(f="future"==i||"past"==i||"maxCheckbox"==i||"minCheckbox"==i?l(a,r,s,o,n):l(r,s,o,n),void 0!=f){var m=t._getCustomErrorMessage(e(r),p,c,n);m&&(f=m)}return f},_getCustomErrorMessage:function(e,a,r,i){var s=!1,o=/^custom\[.*\]$/.test(r)?t._validityProp.custom:t._validityProp[r];if(void 0!=o&&(s=e.attr("data-errormessage-"+o),void 0!=s))return s;if(s=e.attr("data-errormessage"),void 0!=s)return s;var n="#"+e.attr("id");if("undefined"!=typeof i.custom_error_messages[n]&&"undefined"!=typeof i.custom_error_messages[n][r])s=i.custom_error_messages[n][r].message;else if(a.length>0)for(var l=0;l<a.length&&a.length>0;l++){var d="."+a[l];if("undefined"!=typeof i.custom_error_messages[d]&&"undefined"!=typeof i.custom_error_messages[d][r]){s=i.custom_error_messages[d][r].message;break}}return s||"undefined"==typeof i.custom_error_messages[r]||"undefined"==typeof i.custom_error_messages[r].message||(s=i.custom_error_messages[r].message),s},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",equalsPASS:"pattern-mismatch",timeCheck:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,a,r,i,s){switch(t.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var o=e.trim(t.val()),n=e.trim(t.attr("data-validation-placeholder")),l=e.trim(t.attr("placeholder"));if(!o||n&&o==n||l&&o==l)return i.allrules[a[r]].alertText;break;case"radio":case"checkbox":if(s){if(!t.attr("checked"))return i.allrules[a[r]].alertTextCheckboxMultiple;break}var d=t.closest("form, .validationEngineContainer"),u=t.attr("name");if(0==d.find("input[name='"+u+"']:checked").size())return 1==d.find("input[name='"+u+"']:visible").size()?i.allrules[a[r]].alertTextCheckboxe:i.allrules[a[r]].alertTextCheckboxMultiple}},_groupRequired:function(a,r,i,s){var o="["+s.validateAttribute+"*="+r[i+1]+"]",n=!1;return a.closest("form, .validationEngineContainer").find(o).each(function(){return t._required(e(this),r,i,s)?void 0:(n=!0,!1)}),n?void 0:s.allrules[r[i]].alertText},_custom:function(e,t,a,r){var i,s=t[a+1],o=r.allrules[s];if(!o)return void alert("jqv:custom rule not found - "+s);if(o.regex){var n=o.regex;if(!n)return void alert("jqv:custom regex not found - "+s);var l=new RegExp(n);if(!l.test(e.val()))return r.allrules[s].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+s);if(i=o.func,"function"!=typeof i)return void alert("jqv:custom parameter 'function' is no function - "+s);if(!i(e,t,a,r))return r.allrules[s].alertText}},_funcCall:function(e,t,a,r){var i,s=t[a+1];if(s.indexOf(".")>-1){for(var o=s.split("."),n=window;o.length;)n=n[o.shift()];i=n}else i=window[s]||r.customFunctions[s];return"function"==typeof i?i(e,t,a,r):void 0},_equals:function(t,a,r,i){var s=a[r+1];return t.val()!=e("#"+s).val()?i.allrules.equals.alertText:void 0},_equalsPASS:function(t,a,r,i){var s=a[r+1];return t.val()!=e("#"+s).val()?i.allrules.equalsPASS.alertText:void 0},_timeCheck:function(t,a,r,i){var s=a[r+1],o=t.val().split(":"),n=o[0],l=o[1];s=s.replace(/\}/gi,"]").replace(/\{/gi,"[");var d=e("input[name='"+s+"']").val().split(":"),u=d[0],f=d[1];if(!(n>=u))return i.allrules.timeCheck.alertText;if(u==n&&f>=l)return i.allrules.timeCheck.alertText;if(!(u>=0&&23>=u&&f>=0&&59>=f&&n>=0&&23>=n&&l>=0&&59>=l))return"* Les heures doivent Ãªtre comprises entre 00:00 et 23:59";var c,v,p,m,h,g=s.replace("dispostart",""),_=!0;if("all"==e("select[name='dispoday"+g+"']").val())e("input[name^='dispostart']").each(function(){if(e(this).attr("name")!=s)if(c=e(this).attr("name").replace("dispostart",""),v=e(this).val().split(":")[0],p=e("input[name='dispoend"+c+"']").val().split(":")[0],m=e(this).val().split(":")[1],h=e("input[name='dispoend"+c+"']").val().split(":")[1],u>v&&n>p||v>u&&p>n&&v>n);else if(v==u&&m>f);else if(v==n&&h>f);else if(!(u==p&&f>=h&&p>=n))return _=!1,!1});else if("weekend"==e("select[name='dispoday"+g+"']").val())e("input[name^='dispostart']").each(function(){if(e(this).attr("name")!=s&&("sam"==e(this).parent().find("select").val()||"dim"==e(this).parent().find("select").val()||"all"==e(this).parent().find("select").val()||"weekend"==e(this).parent().find("select").val()))if(c=e(this).attr("name").replace("dispostart",""),v=e(this).val().split(":")[0],p=e("input[name='dispoend"+c+"']").val().split(":")[0],m=e(this).val().split(":")[1],h=e("input[name='dispoend"+c+"']").val().split(":")[1],u>v&&n>p||v>u&&p>n&&v>n);else if(v==u&&m>f);else if(v==n&&h>f);else if(!(u==p&&f>=h&&p>=n))return _=!1,!1});else{var x=e("select[name='dispoday"+g+"']").val();e("input[name^='dispostart']").each("sam"==x||"dim"==x?function(){if(e(this).attr("name")!=s&&(e(this).parent().find("select").val()==x||"all"==e(this).parent().find("select").val()||"weekend"==e(this).parent().find("select").val()))if(c=e(this).attr("name").replace("dispostart",""),v=e(this).val().split(":")[0],p=e("input[name='dispoend"+c+"']").val().split(":")[0],m=e(this).val().split(":")[1],h=e("input[name='dispoend"+c+"']").val().split(":")[1],u>v&&n>p||v>u&&p>n&&v>n);else if(v==u&&m>f);else if(v==n&&h>f);else if(!(u==p&&f>=h&&p>=n))return _=!1,!1}:function(){if(e(this).attr("name")!=s&&(e(this).parent().find("select").val()==x||"all"==e(this).parent().find("select").val()))if(c=e(this).attr("name").replace("dispostart",""),v=e(this).val().split(":")[0],p=e("input[name='dispoend"+c+"']").val().split(":")[0],m=e(this).val().split(":")[1],h=e("input[name='dispoend"+c+"']").val().split(":")[1],u>v&&n>p||v>u&&p>n&&v>n);else if(v==u&&m>f);else if(v==n&&h>f);else if(!(u==p&&f>=h&&p>=n))return _=!1,!1})}return 0==_?"* Cette plage horaire entre en conflit avec d'autres plages":void 0},_maxSize:function(e,t,a,r){var i=t[a+1],s=e.val().length;if(s>i){var o=r.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,t,a,r){var i=t[a+1],s=e.val().length;if(i>s){var o=r.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,t,a,r){var i=parseFloat(t[a+1]),s=parseFloat(e.val());if(i>s){var o=r.allrules.min;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_max:function(e,t,a,r){var i=parseFloat(t[a+1]),s=parseFloat(e.val());if(s>i){var o=r.allrules.max;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_past:function(a,r,i,s,o){var n,l=i[s+1],d=e(a.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())n=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;n=t._parseDate(d.val())}else n=t._parseDate(l);var u=t._parseDate(r.val());if(u>n){var f=o.allrules.past;return f.alertText2?f.alertText+t._dateToString(n)+f.alertText2:f.alertText+t._dateToString(n)}},_future:function(a,r,i,s,o){var n,l=i[s+1],d=e(a.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())n=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;n=t._parseDate(d.val())}else n=t._parseDate(l);var u=t._parseDate(r.val());if(n>u){var f=o.allrules.future;return f.alertText2?f.alertText+t._dateToString(n)+f.alertText2:f.alertText+t._dateToString(n)}},_isDate:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return t.test(e)},_isDateTime:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return t.test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,a,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2:t._isDate(i.firstOfGroup[0].value)&&t._isDate(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_dateTimeRange:function(e,a,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2:t._isDateTime(i.firstOfGroup[0].value)&&t._isDateTime(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_maxCheckbox:function(e,t,a,r,i){var s=a[r+1],o=t.attr("name"),n=e.find("input[name='"+o+"']:checked").size();return n>s?(i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+s+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText):void 0},_minCheckbox:function(e,t,a,r,i){var s=a[r+1],o=t.attr("name"),n=e.find("input[name='"+o+"']:checked").size();return s>n?(i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+s+" "+i.allrules.minCheckbox.alertText2):void 0},_creditCard:function(e,t,a,r){var i=!1,s=e.val().replace(/ +/g,"").replace(/-+/g,""),o=s.length;if(o>=14&&16>=o&&parseInt(s)>0){var n,l=0,a=o-1,d=1,u=new String;do n=parseInt(s.charAt(a)),u+=d++%2==0?2*n:n;while(--a>=0);for(a=0;a<u.length;a++)l+=parseInt(u.charAt(a));i=l%10==0}return i?void 0:r.allrules.creditCard.alertText},_ajax:function(a,r,i,s){var o=r[i+1],n=s.allrules[o],l=n.extraData,d=n.extraDataDynamic,u={fieldId:a.attr("id"),fieldValue:a.val()};if("object"==typeof l)e.extend(u,l);else if("string"==typeof l)for(var f=l.split("&"),i=0;i<f.length;i++){var c=f[i].split("=");c[0]&&c[0]&&(u[c[0]]=c[1])}if(d)for(var v=String(d).split(","),i=0;i<v.length;i++){var p=v[i];if(e(p).length){{var m=a.closest("form, .validationEngineContainer").find(p).val();p.replace("#","")+"="+escape(m)}u[p.replace("#","")]=m}}return"field"==s.eventTrigger&&delete s.ajaxValidCache[a.attr("id")],s.isError||t._checkAjaxFieldStatus(a.attr("id"),s)?void 0:(e.ajax({type:s.ajaxFormValidationMethod,url:n.url,cache:!1,dataType:"json",data:u,field:a,rule:n,methods:t,options:s,beforeSend:function(){},error:function(e,a){t._ajaxError(e,a)},success:function(a){var r=a[0],i=e("#"+r).eq(0),o=i.parent().attr("class"),l=i;if(!i.is("form")){"undefined"==typeof o&&(o="");var d=i.parent().parent().attr("class");"undefined"==typeof d&&(d=""),d.match(/dispo\_field/gi)?i=i.parents(".dispo_field").eq(0).is(":first-child")?i.parents(".form-group").eq(0):i.parents(".dispo_field").eq(0):o.match(/col|form\-group/gi)?i=i.parent():d.match(/col|form\-groupe/gi)&&(i=i.parent.parent())}if(1==i.length){var u=a[1],f=a[2];if(u){if(s.ajaxValidCache[r]=!0,f&&!n.force_alert){if(s.allrules[f]){var c=s.allrules[f].alertTextOk;c&&(f=c)}}else f=n.alertTextOk;s.showPrompts&&(f?t._showPrompt(l,f,"pass",!0,s):t._closePrompt(i)),"submit"==s.eventTrigger&&l.closest("form").submit()}else{if(s.ajaxValidCache[r]=!1,s.isError=!0,f&&!n.force_alert){if(s.allrules[f]){var c=s.allrules[f].alertText;c&&(f=c)}}else f=n.alertText;s.showPrompts&&t._showPrompt(l,f,"",!0,s)}if(n.funcCall){var v=window[n.funcCall];v(a)}}i.trigger("jqv.field.result",[i,s.isError,f])}}),n.alertTextLoad)},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return t==e&&(t=e.split("/")),t==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(a,r,i,s,o,n,l){if("undefined"==typeof l)var l="null";var d=a,u=a.parent().attr("class");if(!a.is("form")){"undefined"==typeof u&&(u="");var f=a.parent().parent().attr("class");"undefined"==typeof f&&(f=""),f.match(/dispo\_field/gi)?a=a.parents(".dispo_field").eq(0).is(":first-child")?a.parents(".form-group").eq(0):a.parents(".dispo_field").eq(0):u.match(/col|form\-group/gi)?a=a.parent():f.match(/col|form\-groupe/gi)&&(a=a.parent.parent())}var c=t._getPrompt(a);if(n&&(c=!1),o.scroll&&1==l&&"load"!=i||o.scroll&&"null"==l&&"load"!=i){var v=a,p=v.offset().top,m=v.offset().left,h=o.promptPosition;if("string"==typeof h&&-1!=h.indexOf(":")&&(h=h.substring(0,h.indexOf(":"))),"bottomRight"!=h&&"bottomLeft"!=h){var g=t._getPrompt(v);g&&(p=g.offset().top)}if(o.scrollOffset&&(p-=o.scrollOffset),o.isOverflown){var _=0;if(e(".nav-h.visible").length>0&&(_=30),!isElementVisible(d)&&o.canScroll){var x=e(o.overflownDIV);if(!x.length)return!1;var b=x.scrollTop(),C=-parseInt(x.offset().top)-(e("nav").height()+30+_);p+=b+C-5;var E=e(o.overflownDIV+":not(:animated)");E.animate({scrollTop:p},900,function(){o.focusFirstField&&v.focus()})}}else{var _=0;e(".nav-h.visible").length>0&&(_=30),!isElementVisible(d)&&o.canScroll&&(e("html, body").animate({scrollTop:p-(e("nav").height()+30+_)},900,function(){o.focusFirstField&&v.focus()}),e("html, body").animate({scrollLeft:m},900))}}e.trim(r)&&(c?t._updatePrompt(a,c,r,i,s,o):t._buildPrompt(a,r,i,s,o))},_buildPrompt:function(a,r,i,s,o){var n=e("<div>");switch(n.addClass("undefinedformError"),n.addClass("parentForm"+t._getClassName(a.closest("form, .validationEngineContainer").attr("id"))),n.addClass("formError"),i){case"pass":n.addClass("greenPopup");break;case"load":n.addClass("blackPopup")}s&&n.addClass("ajaxed");var l=(e("<div>").addClass("formErrorContent").html(r).appendTo(n),a.data("promptPosition")||o.promptPosition);if(o.showArrow){var d=e("<div>").addClass("formErrorArrow");if("string"==typeof l){var u=l.indexOf(":");-1!=u&&(l=l.substring(0,u))}switch(l){case"bottomLeft":case"bottomRight":n.find(".formErrorContent").before(d),d.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":d.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),n.append(d)}}o.addPromptClass&&n.addClass(o.addPromptClass);var f=a.attr("data-required-class");if(void 0!==f)n.addClass(f);else if(o.prettySelect&&e("#"+a.attr("id")).next().is("select")){var c=e("#"+a.attr("id").substr(o.usePrefix.length).substring(o.useSuffix.length)).attr("data-required-class");void 0!==c&&n.addClass(c)}n.css({opacity:0}),"inline"===l?(n.addClass("inline"),"undefined"!=typeof a.attr("data-prompt-target")&&e("#"+a.attr("data-prompt-target")).length>0?n.appendTo(e("#"+a.attr("data-prompt-target"))):a.after(n)):a.before(n);var u=t._calculatePosition(a,n,o);return n.css({position:"inline"===l?"relative":"absolute",top:u.callerTopPosition,left:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",a),o.autoHidePrompt&&setTimeout(function(){n.animate({opacity:0},function(){n.closest(".formErrorOuter").remove(),n.remove()})},o.autoHideDelay),n.animate({opacity:.87})},_updatePrompt:function(e,a,r,i,s,o,n){if(a){"undefined"!=typeof i&&("pass"==i?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==i?a.addClass("blackPopup"):a.removeClass("blackPopup")),s?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(r);var l=t._calculatePosition(e,a,o),d={top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize};n?a.css(d):a.animate(d)}},_closePrompt:function(e){var a=t._getPrompt(e);a&&a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove(),a.remove()})},closePrompt:function(e){return t._closePrompt(e)},_getPrompt:function(a){var r=e(a).closest("form, .validationEngineContainer").attr("id"),i="undefinedformError",s=e("."+t._escapeExpression(i)+".parentForm"+r)[0];return s?e(s):void 0},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var a=e(document),r=e("body"),i=t&&t.hasClass("rtl")||t&&"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(i)},_calculatePosition:function(e,t,a){var r,i,s,o=!0,n=e.width(),l=e.position().left;e.find(".dispo_field").length>0&&(l=e.find("div").eq(0).position().left);{var d=e.position().top;e.height()}"absolute"==t.css("position")&&t.css("opacity")>0&&(o=!1),1==o&&t.css("position","absolute").css("left","0").css("top","0");var u=t.height();r=i=0,s=-u,1==o&&t.css("position","").css("left","").css("top","");var f=e.data("promptPosition")||a.promptPosition;e.is("form")&&(f="center");var c="",v="",p=0,m=0;switch("string"==typeof f&&-1!=f.indexOf(":")&&(c=f.substring(f.indexOf(":")+1),f=f.substring(0,f.indexOf(":")),-1!=c.indexOf(",")&&(v=c.substring(c.indexOf(",")+1),c=c.substring(0,c.indexOf(",")),m=parseInt(v),isNaN(m)&&(m=0)),p=parseInt(c),isNaN(c)&&(c=0)),f){default:case"topRight":i+=l+n-30,r+=d;break;case"topLeft":r+=d,i+=l;break;case"centerRight":r=d+4,s=0,i=l+e.outerWidth(!0)+5;break;case"centerLeft":i=l-(t.width()+2),r=d+4,s=0;break;case"center":i=l+t.width()/2+2,r=d+4,s=0;break;case"bottomLeft":r=d+e.height()+5,s=0,i=l;break;case"bottomRight":i=l+n-30,r=d+e.height()+5,s=0;break;case"inline":i=0,r=0,s=0}return i+=p,r+=m,{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:s+"px"}},_saveOptions:function(t,a){if(e.validationEngineLanguage)var r=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=r;var i=e.extend(!0,{},e.validationEngine.defaults,a);return t.data("jqv",i),i},_getClassName:function(e){return e?e.replace(/:/g,"_").replace(/\./g,"_"):void 0},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,a,r,i){var s,o;for(s=r+1;s<a.length;s++)if(o=jQuery("#"+a[s]).first(),o.length&&void 0==t._required(o,["required"],0,i,!0))return t._required(e,["required"],0,i)},_submitButtonClick:function(){var t=e(this),a=t.closest("form, .validationEngineContainer");a.data("jqv_submitButton",t.attr("id"))}};e.fn.validationEngine=function(a){var r=e(this);return r[0]?"string"==typeof a&&"_"!=a.charAt(0)&&t[a]?("showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&t.init.apply(r),t[a].apply(r,Array.prototype.slice.call(arguments,1))):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist in jQuery.validationEngine"):(t.init.apply(r,arguments),t.attach.apply(r)):r},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!1,canScroll:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!0,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!0,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!0,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!0}},e(function(){e.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"
})}(jQuery);